/*
  * ğŸ’– å¹éŸ¿å¤œæ™šçš„æ¨¹ä¸­æ­Œ ğŸ’–
  * ä½œè€…: é˜¿ç“œé›²åœ¨ä¸Š
  */

/* ============================================
  * ğŸ¨ å…¨å±€è®Šé‡å®šç¾© (CSSè‡ªå®šç¾©å±¬æ€§)
  * ============================================ */
:root {
  /* --- ğŸ¨ é™è°§æ£®æ—ä¹‹å¤œé…è‰² --- */
  --pixel-bg: #1a2a2a; /* é¡µé¢ä¸»è¦èƒŒæ™¯è‰²ï¼šæ·±æ—å¤œè‰² */
  --pixel-panel-bg: #2a3a3a; /* å·¦å³ä¾§è¾¹æ å’Œé¡¶æ é¢æ¿èƒŒæ™¯è‰²ï¼šè‹”è—“çŸ³ */
  --pixel-container-bg: #3a4a4a; /* æ¶ˆæ¯æ°”æ³¡ç­‰å®¹å™¨èƒŒæ™¯è‰²ï¼šå¹½é™æ¹–æ°´ */
  --pixel-border: #668080; /* ä¸»è¦è¾¹æ¡†é¢œè‰²ï¼šé›¾ä¸­é’çŸ³ */
  --pixel-text: #ffffff; /* ä¸»è¦æ–‡å­—é¢œè‰²ï¼šæœˆå…‰ç™½ */
  --pixel-text-light: #a0b0b0; /* è¾ƒæµ…çš„æ–‡å­—é¢œè‰²ï¼Œç”¨äºæ¬¡è¦ä¿¡æ¯ï¼šæ™¨é›¾ç° */
  --pixel-accent: #e0c080; /* å¼ºè°ƒè‰²ï¼Œç”¨äºé«˜äº®å’Œäº¤äº’å…ƒç´ ï¼šç¥ç€å…‰ */
  --pixel-accent-hover: #f0d090; /* é¼ æ ‡æ‚¬åœæ—¶çš„å¼ºè°ƒè‰²ï¼šäº®ç¥ç€ */
  --pixel-accent-shadow: #a08040; /* å¼ºè°ƒè‰²çš„é˜´å½±ï¼šæš—ç¥ç€ */
  --pixel-shadow: #101a1a; /* é€šç”¨é˜´å½±é¢œè‰²ï¼šæ·±é‚ƒæ ‘å½± */
  --pixel-user-accent: #80a080; /* ç”¨æˆ·æ¶ˆæ¯çš„ç‰¹æ®Šå¼ºè°ƒè‰²ï¼šæ©„æ¦„ç»¿ */
  --pixel-user-shadow: #406040; /* ç”¨æˆ·æ¶ˆæ¯çš„ç‰¹æ®Šé˜´å½±è‰²ï¼šæ·±æ©„æ¦„ */
  --pixel-accent-alt: #202933; /* ç‰¹æ®Šè¾“å…¥æ¡†å¼ºè°ƒè‰² */
  --pixel-input-bg: #143d4b5d; /* ç»Ÿä¸€è¾“å…¥æ¡†å’Œé€‰æ‹©æ¡†èƒŒæ™¯è‰² */
}

/* ============================================
  * ğŸ“ å…¨å±€åŸºç¤æ¨£å¼è¨­å®š
  * ============================================ */

/* body: é é¢æ ¹å…ƒç´ 
  * #chat: SillyTavernä¸»èŠå¤©å€åŸŸå®¹å™¨
  * .mes_text: æ¯æ¢æ¶ˆæ¯çš„æ–‡å­—å…§å®¹å€åŸŸ */
body,
#chat,
.mes_text {
  font-size: 14px; /* è¨­å®šåŸºç¤å­—é«”å¤§å°ç‚º14åƒç´  */
  color: var(--pixel-text); /* æ‡‰ç”¨æœˆå…‰ç™½ä½œç‚ºä¸»è¦æ–‡å­—é¡è‰² */
  /* ç¦ç”¨åœ–ç‰‡å¹³æ»‘æ¸²æŸ“ï¼Œä¿æŒåƒç´ é¢¨æ ¼çš„æ¸…æ™°é‚Šç·£ */
  image-rendering: pixelated; /* ç¾ä»£ç€è¦½å™¨æ¨™æº– */
  image-rendering: -moz-crisp-edges; /* Firefoxå…¼å®¹ */
  image-rendering: crisp-edges; /* å‚™ç”¨æ¨™æº– */
}

/* body: è¨­å®šæ•´å€‹é é¢çš„èƒŒæ™¯é¡è‰² */
body {
  background-color: var(--pixel-bg) !important; /* æ·±æ—å¤œè‰²èƒŒæ™¯ */
}

/* ============================================
  * âœ¨ æ»¾å‹•æ¢ç¾åŒ– (WebKitç€è¦½å™¨å°ˆç”¨)
  * ============================================ */

/* ::-webkit-scrollbar: æ»¾å‹•æ¢æ•´é«”å®¹å™¨ */
::-webkit-scrollbar {
  width: 6px; /* è¨­å®šæ»¾å‹•æ¢å¯¬åº¦ç‚º8åƒç´  */
}

/* ::-webkit-scrollbar-track: æ»¾å‹•æ¢è»Œé“èƒŒæ™¯ */
::-webkit-scrollbar-track {
  background: transparent; /* è»Œé“å®Œå…¨é€æ˜ï¼Œèå…¥èƒŒæ™¯ */
}

/* ::-webkit-scrollbar-thumb: æ»¾å‹•æ¢æ»‘å¡Šï¼ˆå¯æ‹–æ‹½éƒ¨åˆ†ï¼‰ */
::-webkit-scrollbar-thumb {
  /* ä½¿ç”¨å¤©è—è‰²çš„åŠé€æ˜æ•ˆæœ */
  background-color: color-mix(in srgb, var(--pixel-user-accent) 60%, transparent);
  border: none; /* ç§»é™¤é‚Šæ¡†ä¿æŒç°¡æ½” */
}

/* ::-webkit-scrollbar-thumb:hover: æ»‘å¡Šæ‡¸åœç‹€æ…‹ */
::-webkit-scrollbar-thumb:hover {
  background-color: var(--pixel-user-shadow); /* æ‡¸åœæ™‚è®Šç‚ºæ·±å¤©è—è‰² */
}

/* ============================================
  * ğŸ’» ä¸»è¦å¸ƒå±€é¢æ¿æ¨£å¼
  * ============================================ */

/* SillyTavernä¸»è¦é¢æ¿çµ±ä¸€æ¨£å¼ï¼š
  * #left-nav-panel: å·¦å´å°èˆªé¢æ¿ï¼ˆè§’è‰²ã€ä¸–ç•Œæ›¸ç­‰ï¼‰
  * #right-nav-panel: å³å´å°èˆªé¢æ¿ï¼ˆè¨­å®šã€æ“´å±•ç­‰ï¼‰
  * #WorldInfo: ä¸–ç•Œæ›¸è¨­å®šé¢æ¿
  * #AdvancedFormatting: é«˜ç´šæ ¼å¼åŒ–é¢æ¿
  * #rm_api_block: APIè¨­å®šå€å¡Š
  * #user-settings-block: ç”¨æˆ¶è¨­å®šå€å¡Š
  * #Backgrounds: èƒŒæ™¯è¨­å®šé¢æ¿
  * #rm_extensions_block: æ“´å±•è¨­å®šå€å¡Š */
#left-nav-panel,
#right-nav-panel,
#WorldInfo,
#AdvancedFormatting,
#rm_api_block,
#user-settings-block,
#Backgrounds,
#rm_extensions_block {
  /* æŸ”å’Œçš„å°è§’ç·šæ¼¸è®ŠèƒŒæ™¯ï¼šå¾è‹”è—“çŸ³åˆ°æ·±é‚ƒè‰² */
  background: linear-gradient(135deg, var(--pixel-panel-bg), #2a3a3a) !important;
  border: none !important; /* ç§»é™¤é‚Šæ¡† */
  /* ç§»é™¤åƒç´ é¢¨æ ¼å¤šå±¤é™°å½± */
  box-shadow: none !important;
  border-radius: 0 !important; /* ç§»é™¤åœ“è§’ */
  transition: none !important; /* ç¦ç”¨é»˜èªå‹•ç•«é˜²æ­¢è¦–è¦ºéŒ¯ä½ */
  z-index: 9999 !important; /* ç¢ºä¿é¢æ¿åœ¨æœ€ä¸Šå±¤ */
}

/* PCç«¯å·¦å³é¢æ¿é«˜åº¦çš„ç²¾ç¡®æ§åˆ¶ */

/* --- ğŸ” é¡¶æ æ ·å¼ --- */
/* é¡¶æ å›¾æ ‡çš„åŸºç¡€æ ·å¼ */
#top-bar .drawer-icon {
  color: var(--pixel-text-light); /* åº”ç”¨è¾ƒæµ…çš„æ–‡å­—é¢œè‰² */
  font-family: 'monospace'; /* ä½¿ç”¨ç­‰å®½å­—ä½“ä»¥ä¿è¯è‡ªå®šä¹‰ç¬¦å·æ˜¾ç¤ºä¸€è‡´ */
  font-size: 18px; /* è°ƒæ•´ç¬¦å·å¤§å° */
  line-height: 1; /* ç¡®ä¿ç¬¦å·å‚ç›´å±…ä¸­ */
}

/* é¼ æ ‡æ‚¬åœåœ¨é¡¶æ å›¾æ ‡ä¸Šæ—¶çš„æ ·å¼ */
#top-bar .drawer-icon:hover {
  color: var(--pixel-accent); /* æ‚¬åœæ—¶å˜ä¸ºé«˜äº®è‰² */
  transform: scale(1.1) rotate(-5deg); /* æ·»åŠ è½»å¾®çš„æ”¾å¤§å’Œæ—‹è½¬æ•ˆæœï¼Œå¢åŠ è¶£å‘³æ€§ */
}

/* ============================================
  * ğŸ¨ è‡ªå®šç¾©é ‚æ¬„åœ–æ¨™ç³»çµ±
  * ============================================ */

/* ç‚ºå„å€‹é é¢åŠŸèƒ½æŒ‰éˆ•è‡ªå®šç¾©åœ–æ¨™ç¬¦è™Ÿï¼š
  * ä½¿ç”¨::beforeå½å…ƒç´ æ’å…¥Unicodeç¬¦è™Ÿå–ä»£FontAwesomeåœ–æ¨™ */
#ai-config-button .drawer-icon::before {
  content: 'â';
} /* AIé…ç½®æŒ‰éˆ• */
#sys-settings-button .drawer-icon::before {
  content: 'â';
} /* ç³»çµ±è¨­å®šæŒ‰éˆ• */
#advanced-formatting-button .drawer-icon::before {
  content: 'â‘';
} /* é«˜ç´šæ ¼å¼åŒ–æŒ‰éˆ• */
#WI-SP-button .drawer-icon::before {
  content: 'â’';
} /* ä¸–ç•Œæ›¸æŒ‰éˆ• */
#user-settings-button .drawer-icon::before {
  content: 'â–';
} /* ç”¨æˆ¶è¨­å®šæŒ‰éˆ• */
#logo_block .drawer-icon::before {
  content: 'â’';
} /* Logoå€å¡Š */
#extensions-settings-button .drawer-icon::before {
  content: 'â‘';
} /* æ“´å±•è¨­å®šæŒ‰éˆ• */
#persona-management-button .drawer-icon::before {
  content: 'â';
} /* äººæ ¼ç®¡ç†æŒ‰éˆ• */
#rightNavHolder .drawer-icon::before {
  content: 'â';
} /* å³å´å°èˆªå®¹å™¨ */

/* åœ–æ¨™æ›¿æ›æ©Ÿåˆ¶ï¼šéš±è—åŸå§‹åœ–æ¨™ä¸¦å®šä½æ–°åœ–æ¨™ */
#top-bar .drawer-icon {
  text-indent: -9999px; /* å°‡åŸæœ‰FontAwesomeåœ–æ¨™ç§»è‡³ä¸å¯è¦‹å€åŸŸ */
  position: relative; /* ç‚ºå½å…ƒç´ å®šä½æä¾›åŸºæº– */
  font-size: 20px; /* èª¿æ•´ç‚ºé©åˆUnicodeç¬¦è™Ÿçš„å¤§å° */
  font-family: 'monospace'; /* ç­‰å¯¬å­—é«”ä¿è­‰ç¬¦è™Ÿå°é½Š */
}

/* #top-bar .drawer-icon::before: è‡ªå®šç¾©åœ–æ¨™çš„ä½ç½®èª¿æ•´ */
#top-bar .drawer-icon::before {
  text-indent: 0; /* é‡ç½®å½å…ƒç´ ç¸®æ’ */
  position: absolute; /* çµ•å°å®šä½ä»¥ä¾¿å±…ä¸­ */
  left: 50%; /* æ°´å¹³ä¸­å¿ƒé» */
  top: 50%; /* å‚ç›´ä¸­å¿ƒé» */
  transform: translate(-50%, -50%); /* ç²¾ç¢ºä¸­å¿ƒå°é½Š */
  width: 100%; /* å æ»¿å®¹å™¨å¯¬åº¦ */
  text-align: center; /* æ–‡å­—æ°´å¹³ç½®ä¸­ */
}

/* ============================================
  * ğŸ’¬ SillyTavernèŠå¤©å€åŸŸæ¨£å¼
  * ============================================ */

/* #chat: ä¸»è¦èŠå¤©æ¶ˆæ¯é¡¯ç¤ºå€åŸŸ */
#chat {
  background-color: transparent !important; /* é€æ˜èƒŒæ™¯ä»¥é¡¯ç¤ºbodyçš„è‰è“ç²‰èƒŒæ™¯ */
  padding: 10px; /* è¨­å®šå…§é‚Šè·10åƒç´  */
}

/* ============================================
  * ğŸ—¨ï¸ æ¶ˆæ¯æ°£æ³¡æ¨£å¼
  * ============================================ */

/* .mes: æ¯ä¸€æ¢èŠå¤©æ¶ˆæ¯çš„å®¹å™¨ï¼ˆåŒ…å«é ­åƒã€åç¨±ã€å…§å®¹ï¼‰ */
.mes {
  background-color: var(--pixel-container-bg) !important; /* å¹½é™æ¹–æ°´èƒŒæ™¯ */
  border: 2px solid var(--pixel-border) !important; /* é›¾ä¸­é’çŸ³é‚Šæ¡† */
  border-radius: 4px !important; /* è¼•å¾®åœ“è§’æŸ”åŒ–é‚Šç·£ */
  box-shadow: 2px 2px 0px var(--pixel-shadow) !important; /* æ·±é‚ƒæ ‘å½±é™°å½± */
  margin-bottom: 5px !important; /* æ¶ˆæ¯é–“è·5åƒç´  */
  padding: 10px !important; /* å…§é‚Šè·10åƒç´  */
  position: relative; /* ç‚ºå½å…ƒç´ æä¾›å®šä½åŸºæº– */
}

/* .mes:hover::after: æ¶ˆæ¯æ‡¸åœæ™‚çš„è£é£¾æ•ˆæœï¼ˆæœªå®šç¾©å…·é«”å…§å®¹ï¼‰ */
.mes:hover::after {
  opacity: 1; /* å®Œå…¨ä¸é€æ˜ */
  transform: scale(1.2) rotate(10deg); /* æ”¾å¤§120%ä¸¦é †æ™‚é‡æ—‹è½‰10åº¦ */
}

/* ============================================
  * ğŸ‘¤/ğŸ¤– ç”¨æˆ¶èˆ‡AIæ¶ˆæ¯å€åˆ†
  * ============================================ */

/* div[is_user="true"].mes: ç”¨æˆ¶ç™¼é€çš„æ¶ˆæ¯æ°£æ³¡ï¼ˆå€åˆ¥æ–¼è§’è‰²å›æ‡‰ï¼‰ */
div[is_user='true'].mes {
  border-color: var(--pixel-user-accent) !important; /* ç”¨æˆ¶æ¶ˆæ¯ä½¿ç”¨å¤©ç©ºè—é‚Šæ¡† */
  box-shadow: 2px 2px 0px var(--pixel-user-shadow) !important; /* å¤©è—è‰²é™°å½± */
}

/* ============================================
  * ğŸ·ï¸ è§’è‰²åç¨±èˆ‡ç”¨æˆ¶åæ¨£å¼
  * ============================================ */

/* .mes .ch_name: æ¶ˆæ¯ä¸­çš„è§’è‰²åç¨±æˆ–ç”¨æˆ¶åé¡¯ç¤ºå€åŸŸ */
.mes .ch_name {
  color: var(--pixel-text-light) !important; /* æ™¨é›¾ç°æ–‡å­— */
  font-size: 16px !important; /* è¼ƒå¤§çš„åç¨±å­—é«” */
  margin-bottom: 10px; /* èˆ‡ä¸‹æ–¹å…§å®¹çš„é–“è· */
  text-shadow: 1px 1px 0px rgba(255, 255, 255, 0.5); /* åŠé€æ˜ç™½è‰²æ–‡å­—é™°å½± */
}

/* div[is_user="true"] .ch_name: ç”¨æˆ¶æ¶ˆæ¯ä¸­çš„ç”¨æˆ¶åé¡¯ç¤º */
div[is_user='true'] .ch_name {
  color: var(--pixel-text-light) !important; /* èˆ‡è§’è‰²åä½¿ç”¨ç›¸åŒé¡è‰² */
}

/* ============================================
  * ğŸ–¼ï¸ é ­åƒåœ–ç‰‡æ¨£å¼
  * ============================================ */

/* .mes .avatar: æ¶ˆæ¯ä¸­çš„é ­åƒå®¹å™¨ */
.mes .avatar {
  width: var(--avatar-size, 80px); /* é ­åƒå¯¬åº¦ï¼ˆé è¨­80pxï¼‰ */
  height: var(--avatar-size, 80px); /* é ­åƒé«˜åº¦ï¼ˆé è¨­80pxï¼‰ */
}

/* .mes .avatar img: é ­åƒåœ–ç‰‡å…ƒç´ æœ¬é«” */
.mes .avatar img {
  border-radius: 4px !important; /* è¼•å¾®åœ“è§’æŸ”åŒ–é‚Šç·£ */
  border: 2px solid var(--pixel-border); /* é›¾ä¸­é’çŸ³é‚Šæ¡† */
  box-shadow: 2px 2px 0px var(--pixel-shadow); /* æ·±é‚ƒæ ‘å½±é™°å½± */
  width: 100%; /* å æ»¿å®¹å™¨å¯¬åº¦ */
  height: 100%; /* å æ»¿å®¹å™¨é«˜åº¦ */
  object-fit: cover; /* ä¿æŒç¸±æ©«æ¯”è£å‰ªåœ–ç‰‡ */
}

/* div[is_user="true"] .avatar img: ç”¨æˆ¶é ­åƒçš„ç‰¹æ®Šæ¨£å¼ */
div[is_user='true'] .avatar img {
  border-color: var(--pixel-user-accent) !important; /* ç”¨æˆ¶é ­åƒä½¿ç”¨å¤©ç©ºè—é‚Šæ¡† */
  box-shadow: 2px 2px 0px var(--pixel-user-shadow) !important; /* å¤©è—è‰²é™°å½± */
}

/* ============================================
  * âŒ¨ï¸ è¼¸å…¥å€åŸŸæ¨£å¼
  * ============================================ */

/* #form_sheld: è¼¸å…¥å€åŸŸçš„å¤–å±¤å®¹å™¨ï¼ˆæ¸›å°‘å‚ç›´å…§é‚Šè·ï¼‰ */
#form_sheld {
  padding-top: 0px !important; /* ç§»é™¤é ‚éƒ¨å…§é‚Šè· */
  padding-bottom: 0px !important; /* ç§»é™¤åº•éƒ¨å…§é‚Šè· */
}

/* #send_form: ä¸»è¦è¼¸å…¥è¡¨å–®å®¹å™¨ï¼ˆåŒ…å«è¼¸å…¥æ¡†ã€æŒ‰éˆ•ç­‰ï¼‰ */
#send_form {
  background-color: var(--pixel-panel-bg) !important; /* è‹”è—“çŸ³èƒŒæ™¯ */
  border-top: 2px solid var(--pixel-border) !important; /* é ‚éƒ¨é›¾ä¸­é’çŸ³åˆ†ç•Œç·š */
  box-shadow: none; /* ç§»é™¤é™°å½±ä¿æŒç°¡æ½” */
  padding: 5px 10px; /* èª¿æ•´å…§é‚Šè·ç‚º5pxä¸Šä¸‹ã€10pxå·¦å³ */
}

/* æ–‡å­—è¼¸å…¥æ¡†çµ±ä¸€æ¨£å¼ï¼š
  * #send_textarea: ä¸»è¦èŠå¤©è¼¸å…¥æ¡†
  * .text_pole: é€šç”¨æ–‡å­—è¼¸å…¥æ¡†é¡
  * #curEditTextarea: ç•¶å‰ç·¨è¼¯ä¸­çš„æ–‡æœ¬å€åŸŸ */
#send_textarea,
.text_pole,
#curEditTextarea {
  font-family: var(--pixel-font) !important; /* ä½¿ç”¨åƒç´ é¢¨æ ¼å­—é«” */
  background-color: var(--pixel-input-bg) !important; /* ç»Ÿä¸€è¾“å…¥æ¡†èƒŒæ™¯è‰² */
  color: var(--pixel-text) !important; /* æœˆå…‰ç™½æ–‡å­— */
  border: 2px solid var(--pixel-border) !important; /* é›¾ä¸­é’çŸ³é‚Šæ¡† */
  border-radius: 4px !important; /* è¼•å¾®åœ“è§’ */
  box-shadow: inset 2px 2px 0px var(--pixel-shadow); /* å…§é™°å½±å‰µé€ å‡¹é™·æ•ˆæœ */
}

/* è¼¸å…¥æ¡†ç²å¾—ç„¦é»æ™‚çš„ç‹€æ…‹æ¨£å¼ */
#send_textarea:focus,
.text_pole:focus {
  border-color: var(--pixel-accent) !important; /* ç„¦é»æ™‚é‚Šæ¡†è®Šç‚ºé»ƒé‡‘è‰² */
  box-shadow: inset 2px 2px 0px var(--pixel-accent-shadow); /* å…§é™°å½±è®Šç‚ºæ·±é‡‘è‰² */
}

/* ============================================
  * ğŸ”˜ æŒ‰éˆ•èˆ‡æ§åˆ¶å…ƒä»¶æ¨£å¼
  * ============================================ */

/* æ‰€æœ‰ä¸»è¦æŒ‰éˆ•çš„çµ±ä¸€æ¨£å¼ï¼š
  * .menu_button: ä¸€èˆ¬èœå–®æŒ‰éˆ•é¡
  * .stscript_btn: STscriptæŒ‡ä»¤æŒ‰éˆ•é¡  
  * #mes_stop: åœæ­¢ç”ŸæˆæŒ‰éˆ•
  * #send_but: ç™¼é€æ¶ˆæ¯æŒ‰éˆ• */
.menu_button,
.stscript_btn,
#mes_stop,
#send_but {
  background: linear-gradient(135deg, var(--pixel-accent), var(--pixel-accent-hover)) !important; /* æ‡‰ç”¨æ©™è‰²æ¼¸è®ŠèƒŒæ™¯ */
  color: #19231e !important; /* æ‡‰ç”¨æ·±é‚ƒæ¨¹å½±è‰²æ–‡å­— */
  border: 2px solid var(--pixel-accent-shadow) !important; /* è¨­ç½®æ©™è‰²é™°å½±è‰²ä½œç‚ºé‚Šæ¡† */
  border-radius: 4px !important; /* è¼•å¾®åœ“è§’ */
  box-shadow: 2px 2px 0px 0px var(--pixel-accent-shadow) !important; /* åƒç´ é¢¨æ ¼é™°å½± */
  transition: all 0.1s ease-in-out; /* 0.1ç§’å¹³æ»‘éæ¸¡å‹•ç•« */
  position: relative; /* ç‚ºæŒ‰ä¸‹æ•ˆæœæä¾›å®šä½åŸºæº– */
  top: 0; /* åˆå§‹å‚ç›´ä½ç½® */
  left: 0; /* åˆå§‹æ°´å¹³ä½ç½® */
  text-shadow: 1px 1px 0px rgba(105, 89, 89, 0.3); /* æ·»åŠ æµ…è‰²æ–‡å­—é˜´å½± */
  font-size: 0.8rem !important; /* ç¸®å°å­—é«”è‡³80% */
  padding: 2px 6px !important; /* ç·Šå¯†å…§é‚Šè· */
  line-height: 1.1; /* èª¿æ•´è¡Œé«˜ */
  min-height: 24px !important; /* æœ€å°é«˜åº¦24åƒç´  */
  transform: scale(0.85) !important; /* æ•´é«”ç¸®å°åˆ°85% */
}

/* æŒ‰éˆ•äº’å‹•ç‹€æ…‹æ¨£å¼ */

/* æŒ‰éˆ•æ‡¸åœæ™‚çš„è¦–è¦ºå›é¥‹ */
.menu_button:hover,
.stscript_btn:hover,
#mes_stop:hover,
#send_but:hover {
  background: linear-gradient(135deg, var(--pixel-accent-hover), var(--pixel-accent)) !important; /* åè½¬æ¸å˜æ–¹å‘ */
  transform: translate(1px, 1px); /* è¼•å¾®ä½ç§»æ¨¡æ“¬é æŒ‰ç‹€æ…‹ */
  box-shadow: 1px 1px 0px 0px var(--pixel-accent-shadow) !important; /* é™°å½±ç¸®å° */
}

/* æŒ‰éˆ•è¢«é»æ“Šæ™‚çš„è¦–è¦ºå›é¥‹ */
.menu_button:active,
.stscript_btn:active,
#mes_stop:active,
#send_but:active {
  transform: translate(2px, 2px); /* æ›´å¤§ä½ç§»æ¨¡æ“¬å®Œå…¨æŒ‰ä¸‹ */
  box-shadow: 0px 0px 0px 0px var(--pixel-accent-shadow) !important; /* é™°å½±å®Œå…¨æ¶ˆå¤± */
}

/* ============================================
  * ğŸ¯ æŒ‰éˆ•ç‰¹æ®Šç‹€æ…‹æ¨£å¼ï¼ˆæ¿€æ´»/é¸ä¸­/ç¦ç”¨ï¼‰
  * ============================================ */

/* ğŸŒŸ å·²æ¿€æ´»/ç¶å®š/é¸ä¸­ç‹€æ…‹çš„æŒ‰éˆ• - çµ±ä¸€å¤©è—è‰² */

/* å„ç¨®æ¿€æ´»ç‹€æ…‹çš„CSSé¡åçµ„åˆï¼š
  * .active, .selected, .enabled, .bound: å¸¸è¦‹æ¿€æ´»ç‹€æ…‹é¡
  * [data-active="true"]: æ•¸æ“šå±¬æ€§æ¿€æ´»æ¨™è¨˜
  * .drawer:focus-within .menu_button: æŠ½å±œç²å¾—ç„¦é»æ™‚å…§éƒ¨æŒ‰éˆ•
  * .drawer:not(.closedDrawer) .menu_button: æ‰“é–‹ç‹€æ…‹æŠ½å±œä¸­çš„æŒ‰éˆ•
  * .is_fav .menu_button: æ”¶è—ç‹€æ…‹ç›¸é—œæŒ‰éˆ•
  * .selected .menu_button: é¸ä¸­ç‹€æ…‹ç›¸é—œæŒ‰éˆ•
  * #extensions_settings .menu_button.active: æ“´å±•è¨­å®šä¸­çš„æ¿€æ´»æŒ‰éˆ•
  * #user-settings-block .menu_button.active: ç”¨æˆ¶è¨­å®šä¸­çš„æ¿€æ´»æŒ‰éˆ• */
.menu_button.active,
.menu_button.selected,
.menu_button.enabled,
.menu_button.bound,
.stscript_btn.active,
.stscript_btn.selected,
.stscript_btn.enabled,
.stscript_btn.bound,
.menu_button[data-active='true'],
.stscript_btn[data-active='true'],
.drawer:focus-within .menu_button,
.drawer:not(.closedDrawer) .menu_button,
.is_fav .menu_button,
.selected .menu_button,
#extensions_settings .menu_button.active,
#user-settings-block .menu_button.active {
  /* çµ±ä¸€æ·±å¤©è—è‰²èƒŒæ™¯è¡¨ç¤ºæ¿€æ´»ç‹€æ…‹ */
  background: var(--pixel-user-shadow) !important;
  border-color: var(--pixel-user-shadow) !important; /* æ©„æ¦„è‰²é‚Šæ¡† */
  box-shadow: 2px 2px 0px 0px #0f2612 !important; /* æ©„æ¦„è‰²é™°å½± */
  color: #ffffff !important; /* ç™½è‰²æ–‡å­—æé«˜å°æ¯”åº¦ */
  text-shadow: 1px 1px 0px rgba(0, 0, 0, 0.3) !important; /* æ·±è‰²æ–‡å­—é™°å½±å¢å¼·å¯è®€æ€§ */
  font-weight: 600 !important; /* åŠ ç²—å­—é«” */
  transform: scale(0.85) !important; /* ä¿æŒåŸæœ‰ç¸®æ”¾æ¯”ä¾‹ */
}

/* ğŸŒ ä¸–ç•Œæ›¸æŒ‰éˆ•æ¿€æ´»ç‹€æ…‹ - ç·šè‰²å¼·èª¿ç‰¹å®šé¡å */

/* ä¸–ç•Œæ›¸ç›¸é—œæŒ‰éˆ•çš„çµ„åˆé¸æ“‡å™¨ï¼š
  * .world_button.menu_button.world_set: ä¸–ç•Œæ›¸æŒ‰éˆ•çš„å®Œæ•´é¡å
  * .menu_button.world_set: ä¸€èˆ¬èœå–®æŒ‰éˆ•çš„ä¸–ç•Œæ›¸è¨­å®šç‹€æ…‹
  * #world_button.world_set: ç‰¹å®šä¸–ç•Œæ›¸æŒ‰éˆ•IDçš„è¨­å®šç‹€æ…‹ */
.world_button.menu_button.world_set,
.menu_button.world_set,
#world_button.world_set {
  color: #17bb0c !important; /* é®®æ˜ç¶ è‰²æ¨™ç¤ºä¸–ç•Œæ›¸å·²å•Ÿç”¨ */
  text-shadow: 0 0 4px var(--pixel-user-accent) !important; /* æ©„æ¦„ç»¿ç™¼å…‰æ•ˆæœ */
}

/* â­ æ”¶è—æŒ‰éˆ•æ¿€æ´»ç‹€æ…‹ - é‡‘è‰²å¼·èª¿ç‰¹å®šé¡å */

/* æ”¶è—åŠŸèƒ½ç›¸é—œæŒ‰éˆ•çš„çµ„åˆé¸æ“‡å™¨ï¼š
  * .favorite_button.menu_button.fav_on: æ”¶è—æŒ‰éˆ•çš„å®Œæ•´é¡å
  * .menu_button.fav_on: ä¸€èˆ¬èœå–®æŒ‰éˆ•çš„æ”¶è—ç‹€æ…‹
  * #favorite_button.fav_on: ç‰¹å®šæ”¶è—æŒ‰éˆ•IDçš„æ¿€æ´»ç‹€æ…‹ */
.favorite_button.menu_button.fav_on,
.menu_button.fav_on,
#favorite_button.fav_on {
  color: #ffd700 !important; /* é‡‘è‰²çªå‡ºæ”¶è—ç‹€æ…‹ */
  text-shadow: 0 0 4px var(--pixel-user-accent) !important; /* æ©„æ¦„ç»¿ç™¼å…‰æ•ˆæœ */
}

/* ğŸš« ç¦ç”¨ç‹€æ…‹çš„æŒ‰éˆ• - åŠé€æ˜æ©„æ¦„ç»¿è¦–è¦ºå›é¥‹ */

/* ç¦ç”¨ç‹€æ…‹çš„å„ç¨®æƒ…æ³ï¼š
  * .disabled, :disabled: æ­£å¼ç¦ç”¨ç‹€æ…‹é¡åå’Œå½é¡
  * [data-active="false"]: æ•¸æ“šå±¬æ€§æ¨™è¨˜ç‚ºéæ¿€æ´»
  * .closedDrawer .menu_button: é—œé–‰æŠ½å±œä¸­çš„æŒ‰éˆ• */
.menu_button.disabled,
.menu_button:disabled,
.stscript_btn.disabled,
.stscript_btn:disabled,
.menu_button[data-active='false'],
.stscript_btn[data-active='false'],
.closedDrawer .menu_button {
  /* çµ±ä¸€ä½¿ç”¨åŠé€æ˜æ©„æ¦„ç»¿èƒŒæ™¯ */
  background: color-mix(in srgb, var(--pixel-user-accent) 40%, transparent) !important;
  color: color-mix(in srgb, var(--pixel-text) 50%, transparent) !important; /* 50%é€æ˜æ–‡å­— */
  border-color: color-mix(in srgb, var(--pixel-user-accent) 50%, transparent) !important; /* 50%é€æ˜é‚Šæ¡† */
  box-shadow: 2px 2px 0px 0px color-mix(in srgb, var(--pixel-user-shadow) 30%, transparent) !important; /* 30%é€æ˜é™°å½± */
  opacity: 0.7 !important; /* æ•´é«”é€æ˜åº¦ */
  cursor: not-allowed !important; /* ç¦æ­¢é¼ æ¨™æ¸¸æ¨™ */
  transform: scale(0.85) !important; /* ä¿æŒåŸæœ‰ç¸®æ”¾ */
}

/* ğŸ’¡ ç¦ç”¨æŒ‰éˆ•çš„æ‡¸åœæ•ˆæœï¼ˆä¿æŒç¦ç”¨å¤–è§€ä¸åšäº’å‹•å›é¥‹ï¼‰ */

/* ç¦ç”¨ç‹€æ…‹æŒ‰éˆ•çš„æ‡¸åœç‹€æ…‹ï¼šä¸æ‡‰æœ‰æ—¢å¸¸çš„äº’å‹•æ•ˆæœ */
.menu_button.disabled:hover,
.menu_button:disabled:hover,
.stscript_btn.disabled:hover,
.stscript_btn:disabled:hover,
.menu_button[data-active='false']:hover,
.stscript_btn[data-active='false']:hover,
.closedDrawer .menu_button:hover {
  /* ä¿æŒçµ±ä¸€çš„åŠé€æ˜æ©„æ¦„ç»¿èƒŒæ™¯ */
  background: color-mix(in srgb, var(--pixel-user-accent) 40%, transparent) !important;
  transform: scale(0.85) !important; /* ä¸æ‡‰ç”¨ä½ç§»æ•ˆæœ */
  box-shadow: 2px 2px 0px 0px color-mix(in srgb, var(--pixel-user-shadow) 30%, transparent) !important;
  opacity: 0.8 !important; /* ç¨å¾®æé«˜é€æ˜åº¦ä½œå›é¥‹ */
}

/* Prompt Manager æ£€æŸ¥æŒ‰é’®å’Œæ¡ç›®çš„å­—ä½“é¢œè‰² */
/* å‚è€ƒé›™è‰²ç›’å­.cssçš„å®ç°æ–¹å¼ï¼Œç²¾ç¡®åŒ¹é…SillyTavernçš„ç±»åç»“æ„ */

/* å·²å¼€å¯çš„æ¡ç›® - ä½¿ç”¨æ©„æ¦„ç»¿å¼ºè°ƒ */
#completion_prompt_manager
  #completion_prompt_manager_list
  .completion_prompt_manager_prompt:not(.completion_prompt_manager_prompt_disabled)
  .prompt-manager-toggle-action,
#completion_prompt_manager
  #completion_prompt_manager_list
  .completion_prompt_manager_prompt:not(.completion_prompt_manager_prompt_disabled)
  .prompt-manager-inspect-action {
  color: var(--pixel-user-accent) !important; /* æ©„æ¦„ç»¿*/
  font-weight: 600;
}

/* æœªå¼€å¯/ç¦ç”¨çš„æ¡ç›® - ä½¿ç”¨ç°è‰² */
#completion_prompt_manager
  #completion_prompt_manager_list
  .completion_prompt_manager_prompt_disabled
  .completion_prompt_manager_prompt_name
  .prompt-manager-inspect-action,
#completion_prompt_manager
  #completion_prompt_manager_list
  .completion_prompt_manager_prompt_disabled
  .prompt-manager-toggle-action,
#completion_prompt_manager #completion_prompt_manager_list .completion_prompt_manager_prompt_disabled .fa-solid {
  color: color-mix(in srgb, var(--pixel-text-light) 50%, transparent) !important; /* åŠé€æ˜çš„æ™¨é›¾ç° */
  opacity: 0.7;
}

/* æ‚¬åœæ•ˆæœ - å·²å¼€å¯æ¡ç›® */
#completion_prompt_manager
  #completion_prompt_manager_list
  .completion_prompt_manager_prompt:not(.completion_prompt_manager_prompt_disabled)
  .prompt-manager-inspect-action:hover {
  color: var(--pixel-user-shadow) !important;
  transform: scale(1.05);
  text-shadow: 0 0 4px var(--pixel-accent-shadow);
}

/* æ‚¬åœæ•ˆæœ - æœªå¼€å¯æ¡ç›® */
#completion_prompt_manager
  #completion_prompt_manager_list
  .completion_prompt_manager_prompt_disabled
  .prompt-manager-inspect-action:hover {
  color: var(--pixel-text) !important; /* å˜ä¸ºæ­£å¸¸æ–‡å­—è‰² */
  opacity: 0.9;
  cursor: pointer;
}

/* å¤‡ç”¨é€‰æ‹©å™¨ - å¤„ç†å…¶ä»–å¯èƒ½çš„ç±»åç»„åˆ */
.completion_prompt_manager_prompt.enabled .prompt-manager-inspect-action,
li.enabled .prompt-manager-inspect-action {
  color: var(--pixel-user-accent) !important; /* æ©„æ¦„ç»¿ */
  font-weight: 600;
}

.completion_prompt_manager_prompt.disabled .prompt-manager-inspect-action,
li.disabled .prompt-manager-inspect-action {
  color: color-mix(in srgb, var(--pixel-text-light) 50%, transparent) !important;
  opacity: 0.7;
}

/* ============================================
  * ğŸ¯ Completion Prompt Manager å½ˆçª—å±¤ç´šæ§åˆ¶èˆ‡ä½ç½®è¨­å®š
  * ============================================ */

/* completion_prompt_manager_popup ä¸»å®¹å™¨ï¼šä½æ–¼ top-bar å’Œ send_form ä¹‹é–“
  * è¨­ç½®åˆé©çš„ z-indexï¼Œç¢ºä¿å½ˆçª—åœ¨æ­£ç¢ºçš„å±¤ç´šé¡¯ç¤º */
#completion_prompt_manager_popup {
  z-index: 10002 !important; /* é«˜æ–¼ top-bar (10001)ï¼Œä¿æŒåœ¨æœ€ä¸Šå±¤ */
  position: relative !important; /* ç¢ºä¿å®šä½ä¸Šä¸‹æ–‡ */
  /* ç§»é™¤å°è‡´å‘ä¸‹ä½ç§»çš„æ¨£å¼ */
  top: auto !important; /* é‡ç½® top å€¼ï¼Œé¿å…é¡å¤–ä½ç§» */
  margin-top: 0 !important; /* é‡ç½® margin-topï¼Œä½¿ç”¨è‡ªç„¶ä½ç½® */
}

/* completion_prompt_manager_popup.drawer-content: Prompt Manager å½ˆçª—çš„æŠ½å±œå…§å®¹ */
#completion_prompt_manager_popup.drawer-content {
  z-index: 10002 !important; /* èˆ‡ä¸»å®¹å™¨ä¿æŒä¸€è‡´çš„é«˜å±¤ç´š */
  position: relative !important; /* ç¢ºä¿ z-index ç”Ÿæ•ˆ */
  /* æ‡‰ç”¨ä¸»é¡Œæ¨£å¼ */
  background: linear-gradient(135deg, var(--pixel-panel-bg), #3a4a4a) !important;
  border: none !important; /* ç§»é™¤é‚Šæ¡† */
  box-shadow: none !important; /* ç§»é™¤é™°å½± */
  border-radius: 0 !important; /* ç§»é™¤åœ“è§’ */
  color: var(--pixel-text) !important;
  overflow-x: hidden !important; /* éš±è—æ©«å‘æ»¾å‹•æ¢ */
}

/* ç¢ºä¿ Prompt Manager å½ˆçª—çš„æ‰€æœ‰ç›¸é—œå…ƒç´ éƒ½æœ‰æ­£ç¢ºçš„å±¤ç´šå’Œæ¨£å¼ */
#completion_prompt_manager_popup .drawer,
#completion_prompt_manager_popup .drawer-toggle,
#completion_prompt_manager_popup .drawer-header,
#completion_prompt_manager_popup .drawer-icon {
  z-index: 10002 !important; /* çµ±ä¸€é«˜å±¤ç´šè¨­ç½® */
  position: relative !important; /* ç¢ºä¿å±¤ç´šç”Ÿæ•ˆ */
  color: var(--pixel-text-light) !important; /* æ‡‰ç”¨ä¸»é¡Œæ–‡å­—é¡è‰² */
}

/* Prompt Manager å½ˆçª—æ¨™é¡Œæ¨£å¼ */
#completion_prompt_manager_popup .drawer-header {
  background-color: var(--pixel-accent-alt) !important; /* è±†æ²™è‰²èƒŒæ™¯ */
  border-bottom: 2px solid var(--pixel-border) !important;
  padding: 8px 12px !important;
  font-weight: 600 !important;
  text-shadow: 1px 1px 0px rgba(255, 255, 255, 0.5);
}

/* Prompt Manager å½ˆçª—å…§å®¹å€åŸŸæ¨£å¼ */
#completion_prompt_manager_popup .drawer-content {
  background-color: var(--pixel-container-bg) !important; /* ç´”ç™½èƒŒæ™¯ */
  border: none !important; /* ç§»é™¤å…§éƒ¨é‚Šæ¡†ï¼Œä½¿ç”¨å¤–å±¤é‚Šæ¡† */
  padding: 10px !important;
  max-height: 100% !important;
  overflow-y: auto !important; /* å…§å®¹éå¤šæ™‚å…è¨±æ»¾å‹• */
  overflow-x: hidden !important; /* éš±è—æ©«å‘æ»¾å‹•æ¢ */
}

/* ============================================
  * ğŸ¯ QR (Quick Reply) å¿«é€Ÿå›æ‡‰ç³»çµ±æ¨£å¼
  * ============================================ */

/* --- ğŸ”§ ç‰¹æ®Šç»„ä»¶æ ·å¼ --- */
/* è¾“å…¥æ¡†ä¸Šæ–¹å¿«æ·æ ¼å¼æŒ‰é’®çš„å®¹å™¨æ ·å¼ */
#nonQRFormItems {
  background-color: var(--pixel-panel-bg) !important; /* åº”ç”¨é¢æ¿èƒŒæ™¯è‰² */
  padding: 2px; /* å‡å°å†…è¾¹è·ä½¿å…¶æ›´ç´§å‡‘ */
}

/* é¡¶æ å®¹å™¨çš„æ ·å¼ */
#top-settings-holder {
  background-color: var(--pixel-panel-bg) !important; /* åº”ç”¨é¢æ¿èƒŒæ™¯è‰² */
  border-bottom: 2px solid var(--pixel-border) !important; /* æ·»åŠ åº•éƒ¨è¾¹æ¡†ä»¥ä½œåŒºåˆ† */
  min-height: 38px; /* è°ƒæ•´é¡¶æ æœ€å°é«˜åº¦ */
  height: var(--topBarBlockSize, 38px) !important; /* ç¡®ä¿é«˜åº¦ä¸€è‡´ */
  left: 0 !important; /* å‘å·¦ç§»åŠ¨ */
  box-shadow: none !important;
}

#top-bar {
  background-color: transparent !important;
  border-bottom: none !important;
  box-shadow: none !important;
}

/* æ‰©å±•èœå•çš„æ ·å¼ */
#extensionsMenu {
  background-color: var(--pixel-panel-bg) !important; /* åº”ç”¨é¢æ¿èƒŒæ™¯è‰² */
  border: none !important; /* ç§»é™¤è¾¹æ¡† */
  box-shadow: none !important; /* ç§»é™¤é˜´å½± */
  border-radius: 0 !important; /* ç§»é™¤åœ†è§’ */
}

/* æ‰©å±•èœå•åˆ—è¡¨é¡¹æ‚¬åœæ—¶çš„æ ·å¼ */
#extensionsMenu .list-item:hover {
  background-color: var(--pixel-user-accent) !important; /* åº”ç”¨å¤©è—è‰²æ‚¬åœè‰² */
  color: var(--pixel-text) !important; /* ä¿æŒæ–‡å­—é¢œè‰² */
}

/* è¾“å…¥æ¡†å·¦ä¾§é€‰é¡¹æŒ‰é’®çš„æ ·å¼ */
#options_button {
  color: var(--pixel-text-light) !important; /* åº”ç”¨è¾ƒæµ…çš„æ–‡å­—é¢œè‰² */
  transition: all 0.1s ease-in-out; /* æ·»åŠ å¹³æ»‘è¿‡æ¸¡ */
}

/* ç‚¹å‡»é€‰é¡¹æŒ‰é’®åå¼¹å‡ºçš„èœå•å®¹å™¨æ ·å¼ */
.options-content {
  background-color: var(--pixel-panel-bg) !important; /* åº”ç”¨é¢æ¿èƒŒæ™¯è‰² */
  border: none !important; /* ç§»é™¤è¾¹æ¡† */
  box-shadow: none !important; /* ç§»é™¤é˜´å½± */
  border-radius: 0 !important; /* ç§»é™¤åœ†è§’ */
}

/* é€‰é¡¹èœå•å†…çš„æŒ‰é’®æ ·å¼ */
.options-content .menu_button {
  background: var(--pixel-user-accent) !important; /* å¤©è—è‰²èƒŒæ™¯ */
  color: var(--pixel-text) !important; /* åº”ç”¨ä¸»è¦æ–‡å­—é¢œè‰² */
  border: 2px solid var(--pixel-user-accent) !important; /* å¤©è—è‰²é‚Šæ¡† */
}

/* é€‰é¡¹èœå•å†…çš„æŒ‰é’®æ‚¬åœæ ·å¼ */
.options-content .menu_button:hover {
  background: var(--pixel-user-shadow) !important; /* æ‡¸åœæ™‚æ·±å¤©è—è‰² */
  border-color: var(--pixel-user-shadow) !important; /* é‚Šæ¡†è®Šç‚ºæ·±å¤©è—è‰² */
}

/* ä¿®æ­£é€‰é¡¹èœå•ä¸­è¢«é‡ç½®äº†å­—ä½“å’ŒèƒŒæ™¯çš„å…ƒç´  */
.options-content .font-family-reset {
  font-family: transparent !important; /* å¼ºåˆ¶åº”ç”¨åƒç´ å­—ä½“ */
  background-color: transparent !important; /* å¼ºåˆ¶èƒŒæ™¯é€æ˜ï¼Œä»¥æ˜¾ç¤ºä¸‹å±‚é¢œè‰² */
  color: transparent !important; /* å¼ºåˆ¶åº”ç”¨ä¸»è¦æ–‡å­—é¢œè‰² */
}

/* ============================================
  * ğŸ“± ç§»å‹•ç«¯éŸ¿æ‡‰å¼é©é…ï¼ˆå°æ–¼1000pxå¯¬åº¦ï¼‰
  * ============================================ */

/* åª’é«”æŸ¥è©¢ï¼šç•¶è¢å¹•å¯¬åº¦å°æ–¼ç­‰æ–¼1000åƒç´ æ™‚æ‡‰ç”¨ä»¥ä¸‹æ¨£å¼ */
@media screen and (max-width: 1000px) {
  /* ç§»å‹•ç«¯é¢æ¿å…¨è¢å¹•é©é…ï¼šè®“æ‰€æœ‰æŠ½å±œé¢æ¿å æ»¿è¢å¹•å¯¬åº¦ */
  #left-nav-panel,
  #right-nav-panel,
  #WorldInfo,
  #AdvancedFormatting,
  #rm_api_block,
  #user-settings-block,
  #Backgrounds,
  #rm_extensions_block {
    width: 100% !important; /* å¯¬åº¦å æ»¿è¢å¹• */
    /* ä½¿ç”¨dvhå–®ä½ï¼ˆå‹•æ…‹è¦–çª—é«˜åº¦ï¼‰ä¸¦æ¸›å»é ‚æ¬„é«˜åº¦ */
    box-shadow: none !important; /* ç§»é™¤é™°å½±ç°¡åŒ–ç•Œé¢ */
  }

  /* ç§»å‹•ç«¯æ¶ˆæ¯æ°£æ³¡ä½ˆå±€èª¿æ•´ï¼šç¸®å°é–“è·ä¸¦æ”¹ç‚ºå‚ç›´ä¸­å¿ƒå°é½Š */
  .mes {
    margin-bottom: 15px !important; /* æ¸›å°‘æ¶ˆæ¯é–“è·è‡³15px */
    padding: 10px !important; /* æ¸›å°‘å…§é‚Šè·è‡³10px */
    display: flex; /* ä½¿ç”¨Flexboxä½ˆå±€ */
    flex-direction: column; /* å‚ç›´æ’åˆ— */
    align-items: center; /* æ°´å¹³ç½®ä¸­å°é½Š */
  }

  /* ç§»å‹•ç«¯å­—é«”å¤§å°èª¿æ•´ */
  body,
  #chat,
  .mes_text {
    font-size: 14px; /* ä¿æŒåŸºç¤å­—é«”å¤§å° */
    padding: 5px; /* æ¸›å°‘å…§é‚Šè· */
  }

  /* ç§»å‹•ç«¯è§’è‰²åç¨±ä½ˆå±€èª¿æ•´ */
  .mes .ch_name {
    font-size: 16px !important; /* ä¿æŒè¼ƒå¤§å­—é«” */
    text-align: center; /* ç½®ä¸­é¡¯ç¤º */
    order: 2; /* Flexboxé †åºï¼šæ”¾åœ¨é ­åƒä¹‹å¾Œ */
  }

  /* ç§»å‹•ç«¯é ­åƒä½ˆå±€èª¿æ•´ */
  .mes .avatar {
    order: 1; /* Flexboxé †åºï¼šæ”¾åœ¨æœ€ä¸Šæ–¹ */
    margin-bottom: 10px; /* èˆ‡ä¸‹æ–¹å…ƒç´ çš„é–“è· */
    width: 80px; /* å›ºå®šå¯¬åº¦ */
    height: 90px; /* å›ºå®šé«˜åº¦ */
  }

  /* ç§»å‹•ç«¯æ¶ˆæ¯å…§å®¹å€åŸŸä½ˆå±€ */
  .mes .mes_block {
    order: 3; /* Flexboxé †åºï¼šæ”¾åœ¨æœ€ä¸‹æ–¹ */
  }
}

/* ç§»åŠ¨ç«¯è¾“å…¥æ¡†é€‚é… */
.text_pole,
textarea,
.ui-autocomplete-input,
.flex-container .text_pole,
.flex-container .textarea_compact {
  width: 100% !important;
  box-sizing: border-box; /* ç¡®ä¿ padding å’Œ border ä¸ä¼šå¢åŠ é¢å¤–å®½åº¦ */
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  margin: 2px 0 !important; /* è°ƒæ•´å‚ç›´è¾¹è· */
  padding: 5px !important; /* è°ƒæ•´å†…è¾¹è· */
}

/* åŒ…å«è¾“å…¥æ¡†çš„flexå®¹å™¨é€‚é… */
.flex-container > .text_pole,
.flex-container > textarea {
  flex: 1 !important; /* å…è®¸å…ƒç´ åœ¨flexå®¹å™¨ä¸­ä¼¸ç¼© */
  min-width: 0; /* é˜²æ­¢å†…å®¹æº¢å‡º */
}

/* ç§»åŠ¨ç«¯selectå­—æ®µèƒŒæ™¯è‰²ä¿®æ­£ */
@media screen and (max-width: 1000px) {
  select,
  select.J-paginationjs-size-select,
  #themes,
  #example_messages_behavior,
  #main_api,
  #chat_completion_source,
  #persona_sort_order,
  #persona_description_position,
  select[id*='preset'],
  select[id*='template'],
  select[id*='theme'] {
    background-color: var(--pixel-input-bg) !important; /* ç§»åŠ¨ç«¯ç»Ÿä¸€è¾“å…¥æ¡†èƒŒæ™¯è‰² */
    color: var(--pixel-text) !important; /* æœˆå…‰ç™½æ–‡å­— */
    -webkit-appearance: none; /* ç§»é™¤webkité»˜è®¤æ ·å¼ */
    appearance: none; /* ç§»é™¤é»˜è®¤æ ·å¼ */
  }

  /* ç§»åŠ¨ç«¯Select2ç»„ä»¶èƒŒæ™¯è‰²ä¿®æ­£ */
  .select2-selection,
  .select2-selection--multiple,
  .select2-selection--single {
    background-color: var(--pixel-input-bg) !important; /* ç§»åŠ¨ç«¯ç»Ÿä¸€è¾“å…¥æ¡†èƒŒæ™¯è‰² */
    color: var(--pixel-text) !important; /* æœˆå…‰ç™½æ–‡å­— */
  }

  .select2-dropdown {
    background-color: var(--pixel-panel-bg) !important; /* ç§»åŠ¨ç«¯æ·±è‰²ä¸‹æ‹‰èœå•èƒŒæ™¯ */
  }
}

/* ============================================
  * ğŸ¨ å¿«æ·æ ¼å¼åŒ–æŒ‰éˆ•å®¹å™¨æ¨£å¼
  * ============================================ */

/* #send_form .flex-container.flexGap5.popoutVisible: 
  * è¼¸å…¥è¡¨å–®ä¸­çš„å¿«æ·æ ¼å¼åŒ–æŒ‰éˆ•å®¹å™¨ï¼ˆç•¶å¯è¦‹æ™‚ï¼‰ */
#send_form .flex-container.flexGap5.popoutVisible {
  background-color: var(--pixel-panel-bg) !important; /* è‹”è—“çŸ³èƒŒæ™¯ */
}

/* å¿«æ·æ ¼å¼åŒ–å®¹å™¨å…§éƒ¨æŒ‰éˆ•çš„é è¨­æ¨£å¼ */
#send_form .flex-container.flexGap5.popoutVisible .menu_button {
  background: #2c552c !important; /* æ·±é’è‹”ç¶  */
  color: #ffffff !important; /* æœˆå…‰ç™½æ–‡å­— */
  border: 2px solid #2c552c !important; /* æ·±é’è‹”ç¶ é‚Šæ¡† */
}

/* å¿«æ·æ ¼å¼åŒ–æŒ‰éˆ•çš„æ‡¸åœç‹€æ…‹ */
#send_form .flex-container.flexGap5.popoutVisible .menu_button:hover {
  background: var(--pixel-user-shadow) !important; /* æ‡¸åœæ™‚è®Šç‚ºæ·±å¤©è—è‰² */
  border-color: var(--pixel-user-shadow) !important; /* é‚Šæ¡†è®Šç‚ºæ·±å¤©è—è‰² */
}

/* ============================================
  * ğŸ­ å½ˆçª—ç³»çµ±æ¨£å¼ï¼ˆé®ç½©ã€å®¹å™¨ã€äº’å‹•ï¼‰
  * ============================================ */

/* å½ˆçª—èƒŒæ™¯é®ç½©å±¤æ¨£å¼ï¼š
  * #shadow_character_popup: è§’è‰²é¸æ“‡å½ˆçª—çš„é®ç½©
  * #shadow_select_chat_popup: èŠå¤©é¸æ“‡å½ˆçª—çš„é®ç½©
  * .popup_shadow: é€šç”¨å½ˆçª—é®ç½©é¡å */
#shadow_character_popup,
#shadow_select_chat_popup,
.popup_shadow {
  background-color: rgba(26, 26, 46, 0.5) !important; /* åŠé€æ˜çš„æ·±è“è‰² */
  -webkit-backdrop-filter: blur(12px); /* WebKitèƒŒæ™¯æ¨¡ç³Šæ•ˆæœ */
  backdrop-filter: blur(12px); /* æ¨™æº–èƒŒæ™¯æ¨¡ç³Šæ•ˆæœ */
}

/* å½ˆçª—ä¸»é«”å®¹å™¨çµ±ä¸€æ¨£å¼ï¼š
  * #character_popup: è§’è‰²è©³ç´°ä¿¡æ¯å½ˆçª—
  * #select_chat_popup: èŠå¤©é¸æ“‡å½ˆçª—
  * #character_context_menu: è§’è‰²å³éµèœå–®
  * #dialogue_del_mes: åˆªé™¤æ¶ˆæ¯ç¢ºèªå½ˆçª—
  * .popup-content: é€šç”¨å½ˆçª—å…§å®¹é¡
  * .popup_body: é€šç”¨ç¢ºèªå½ˆçª—ä¸»é«”é¡
  * .gradio-container .popup: Gradioæ¡†æ¶å½ˆçª—å…¼å®¹ */
#character_popup,
#select_chat_popup,
#character_context_menu,
#dialogue_del_mes,
.popup-content,
.popup_body {
  background-color: #2a363b !important;
}
.popup_body,
.gradio-container .popup {
  /* æŸ”å’Œå°è§’ç·šæ¼¸è®ŠèƒŒæ™¯ï¼šå¾è‹”è—“çŸ³åˆ°æ·±é‚ƒè‰² */
  background: linear-gradient(135deg, var(--pixel-panel-bg), #2c2c3e) !important;
  border: 2px solid var(--pixel-border) !important; /* è®¾ç½®2åƒç´ çš„è¾¹æ¡† */
  /* åˆ›å»ºåƒç´ é£æ ¼çš„å¤šå±‚é˜´å½± */
  box-shadow:
    3px 3px 0px var(--pixel-shadow),
    5px 5px 0px var(--pixel-border) !important;
  border-radius: 4px !important; /* æ·»åŠ è½»å¾®çš„åœ†è§’ */
  color: var(--pixel-text) !important; /* æœˆå…‰ç™½æ–‡å­— */
  z-index: 10002 !important; /* èˆ‡ Completion Prompt Manager ç›¸åŒå±¤ç´š */
  position: relative !important; /* ç¢ºä¿ z-index ç”Ÿæ•ˆ */
}

/* è§’è‰²å³éµèœå–®çš„ç‰¹æ®Šæ¨£å¼è™•ç† */

/* #character_context_menu: è§’è‰²å³éµé»æ“Šå½ˆå‡ºçš„ä¸Šä¸‹æ–‡èœå–® */
#character_context_menu {
  padding: 5px; /* èœå–®å…§é‚Šè· */
}

/* #character_context_menu ul: å³éµèœå–®çš„åˆ—è¡¨å®¹å™¨ */
#character_context_menu ul {
  list-style: none; /* ç§»é™¤åˆ—è¡¨æ¨£å¼ */
  padding: 0; /* ç§»é™¤å…§é‚Šè· */
  margin: 0; /* ç§»é™¤å¤–é‚Šè· */
}

/* #character_context_menu li button: å³éµèœå–®ä¸­çš„æŒ‰éˆ•é …ç›® */
#character_context_menu li button {
  font-family: var(--pixel-font) !important; /* åƒç´ é¢¨æ ¼å­—é«” */
  background: transparent !important; /* é€æ˜èƒŒæ™¯ */
  border: none !important; /* ç„¡é‚Šæ¡† */
  color: var(--pixel-text) !important; /* æœˆå…‰ç™½æ–‡å­— */
  width: 100%; /* å æ»¿å®¹å™¨å¯¬åº¦ */
  text-align: left; /* æ–‡å­—å·¦å°é½Š */
  padding: 8px 12px; /* ä¸Šä¸‹8pxã€å·¦å³12pxå…§é‚Šè· */
  border-radius: 2px; /* å¾®åœ†è§’ */
}

/* #character_context_menu li button:hover: å³éµèœå–®æŒ‰éˆ•æ‡¸åœæ•ˆæœ */
#character_context_menu li button:hover {
  background: var(--pixel-accent-hover) !important; /* æ‡¸åœæ™‚èƒŒæ™¯è®Šç‚ºäº®ç¥ç€ */
  color: #101a1a !important; /* æ·±é‚ƒæ¨¹å½±è‰²æ–‡å­— */
}

/* å½ˆçª—æ¨™é¡Œæ¨£å¼çµ±ä¸€è¨­å®šï¼š
  * #character_popup h4: è§’è‰²å½ˆçª—çš„h4æ¨™é¡Œ
  * #select_chat_popup h3: èŠå¤©é¸æ“‡å½ˆçª—çš„h3æ¨™é¡Œ
  * #selectChatPopupHeaderText: èŠå¤©é¸æ“‡å½ˆçª—æ¨™é¡Œæ–‡å­— */
#character_popup h4,
#select_chat_popup h3,
#selectChatPopupHeaderText {
  color: var(--pixel-text-light) !important; /* æ™¨é›¾ç°æ–‡å­— */
  font-size: 16px !important; /* æ¨™é¡Œå­—é«”å¤§å° */
  text-shadow: 1px 1px 0px rgba(0, 0, 0, 0.5); /* åŠé€æ˜é»‘è‰²æ–‡å­—é™°å½± */
  border-bottom: 2px dotted var(--pixel-border); /* é»ç‹€ä¸‹é‚Šæ¡†åˆ†éš”ç·š */
  padding-bottom: 5px; /* ä¸‹å…§é‚Šè· */
  margin-bottom: 10px; /* ä¸‹å¤–é‚Šè· */
}

/* å½ˆçª—å…§éƒ¨æŒ‰éˆ•çš„ä¸»é¡Œæ¨£å¼æ‡‰ç”¨ï¼š
  * #character_popup .menu_button: è§’è‰²å½ˆçª—å…§çš„æŒ‰éˆ•
  * #select_chat_popup .menu_button: èŠå¤©é¸æ“‡å½ˆçª—å…§çš„æŒ‰éˆ•
  * #dialogue_del_mes .menu_button: åˆªé™¤æ¶ˆæ¯ç¢ºèªå½ˆçª—å…§çš„æŒ‰éˆ• */
#character_popup .menu_button,
#select_chat_popup .menu_button,
#dialogue_del_mes .menu_button {
  font-family: var(--pixel-font) !important; /* åƒç´ é¢¨æ ¼å­—é«” */
  background: linear-gradient(135deg, var(--pixel-accent), var(--pixel-accent-hover)) !important; /* ç¥ç€è‰²æ¼¸è®ŠèƒŒæ™¯ */
  color: #101a1a !important; /* æ·±é‚ƒæ¨¹å½±è‰²æ–‡å­— */
  border: 2px solid var(--pixel-accent-shadow) !important; /* æš—ç¥ç€é‚Šæ¡† */
  border-radius: 4px !important; /* è¼•å¾®åœ“è§’ */
  box-shadow: 2px 2px 0px 0px var(--pixel-accent-shadow) !important; /* åƒç´ é¢¨æ ¼é™°å½± */
  transition: all 0.1s ease-in-out; /* å¹³æ»‘éæ¸¡å‹•ç•« */
  position: relative; /* ç›¸å°å®šä½ */
  top: 0; /* åˆå§‹å‚ç›´ä½ç½® */
  left: 0; /* åˆå§‹æ°´å¹³ä½ç½® */
  text-shadow: 1px 1px 0px rgba(255, 255, 255, 0.3); /* æµ…è‰²æ–‡å­—é™°å½± */
}

/* å½ˆçª—æŒ‰éˆ•æ‡¸åœæ•ˆæœ */
#character_popup .menu_button:hover,
#select_chat_popup .menu_button:hover,
#dialogue_del_mes .menu_button:hover {
  background: linear-gradient(135deg, var(--pixel-accent-hover), var(--pixel-accent)) !important; /* åè½¬æ¸å˜æ–¹å‘ */
  transform: translate(1px, 1px); /* è¼•å¾®ä½ç§»æ¨¡æ“¬æŒ‰ä¸‹ */
  box-shadow: 1px 1px 0px 0px var(--pixel-accent-shadow) !important; /* ç¸®å°é™°å½± */
}

/* å½ˆçª—æŒ‰éˆ•é»æ“Šæ•ˆæœ */
#character_popup .menu_button:active,
#select_chat_popup .menu_button:active,
#dialogue_del_mes .menu_button:active {
  transform: translate(2px, 2px); /* æ›´å¤§ä½ç§»æ¨¡æ“¬å®Œå…¨æŒ‰ä¸‹ */
  box-shadow: 0px 0px 0px 0px var(--pixel-accent-shadow) !important; /* é™°å½±æ¶ˆå¤± */
}

/* .popup_text: é€šç”¨ç¢ºèªå½ˆçª—å…§çš„æ–‡æœ¬å€åŸŸæ¨£å¼ */
.popup_text {
  font-family: var(--pixel-font) !important; /* åƒç´ é¢¨æ ¼å­—é«” */
  color: var(--pixel-text) !important; /* æœˆå…‰ç™½æ–‡å­— */
  font-size: 16px; /* æ–‡å­—å¤§å° */
  padding: 10px; /* å…§é‚Šè· */
  background-color: var(--pixel-container-bg); /* å¹½é™æ¹–æ°´èƒŒæ™¯ */
  border: 2px solid var(--pixel-border); /* é›¾ä¸­é’çŸ³é‚Šæ¡† */
  border-radius: 4px; /* è¼•å¾®åœ“è§’ */
  box-shadow: inset 1px 1px 0px var(--pixel-shadow); /* å…§é™°å½±å‰µé€ å‡¹é™·æ•ˆæœ */
}

/* ============================================
  * âœ… å½ˆçª—å…§çš„è‡ªå®šç¾©è¤‡é¸æ¡†æ¨£å¼
  * ============================================ */

/* .popup_body input[type="checkbox"]: å½ˆçª—ä¸­çš„è¤‡é¸æ¡†å…ƒç´  */
.popup_body input[type='checkbox'] {
  -webkit-appearance: none; /* ç§»é™¤WebKité è¨­å¤–è§€ */
  appearance: none; /* ç§»é™¤æ¨™æº–é è¨­å¤–è§€ */
  background-color: var(--pixel-container-bg); /* å¹½é™æ¹–æ°´èƒŒæ™¯ */
  margin-right: 8px; /* èˆ‡å³å´æ–‡å­—çš„é–“è· */
  font: inherit; /* ç¹¼æ‰¿çˆ¶å…ƒç´ å­—é«” */
  color: currentColor; /* ç¹¼æ‰¿ç•¶å‰æ–‡å­—é¡è‰² */
  width: 1.15em; /* å¯¬åº¦ç‚º1.15å€å­—é«”å¤§å° */
  height: 1.15em; /* é«˜åº¦ç‚º1.15å€å­—é«”å¤§å° */
  border: 2px solid var(--pixel-border); /* é›¾ä¸­é’çŸ³é‚Šæ¡† */
  border-radius: 2px; /* å¾®åœ“è§’ */
  transform: translateY(-0.075em); /* å¾®å‘ä¸Šèª¿æ•´å°é½Š */
  display: inline-grid; /* å…§è¯ç¶²æ ¼ä½ˆå±€ */
  place-content: center; /* å…§å®¹ç½®ä¸­ */
  box-shadow: inset 1px 1px 0px var(--pixel-shadow); /* å…§é™°å½±å‰µé€ å‡¹é™·æ•ˆæœ */
}

/* è¤‡é¸æ¡†çš„å‹¾é¸æ¨™è¨˜ï¼ˆä½¿ç”¨å½å…ƒç´ å¯¦ç¾ï¼‰ */
.popup_body input[type='checkbox']::before {
  content: ''; /* ç©ºå…§å®¹å½å…ƒç´  */
  width: 0.65em; /* å‹¾é¸æ¨™è¨˜å¯¬åº¦ */
  height: 0.65em; /* å‹¾é¸æ¨™è¨˜é«˜åº¦ */
  transform: scale(0); /* åˆå§‹ç¸®æ”¾ç‚º0ï¼ˆéš±è—ï¼‰ */
  transition: 120ms transform ease-in-out; /* 120æ¯«ç§’ç¸®æ”¾å‹•ç•« */
  background-color: var(--pixel-user-accent); /* å¤©ç©ºè—èƒŒæ™¯è‰² */
  border-radius: 1px; /* å¾®å°åœ“è§’ */
}

/* è¤‡é¸æ¡†è¢«å‹¾é¸æ™‚çš„ç‹€æ…‹ */
.popup_body input[type='checkbox']:checked::before {
  transform: scale(1); /* ç¸®æ”¾ç‚º100%ï¼ˆé¡¯ç¤ºï¼‰ */
}

/* ============================================
  * ğŸ’¬ æµ®å‹•æç¤ºæ¨£å¼
  * ============================================ */

/* #floatingPrompt: AIç”Ÿæˆæ™‚é¡¯ç¤ºçš„æµ®å‹•æç¤ºæ¡† */
#floatingPrompt {
  background: var(--pixel-panel-bg) !important; /* è‹”è—“çŸ³èƒŒæ™¯ */
  color: var(--pixel-text) !important; /* æœˆå…‰ç™½æ–‡å­— */
  border: none !important; /* ç§»é™¤é‚Šæ¡† */
  border-radius: 0 !important; /* ç§»é™¤åœ“è§’ */
  box-shadow: none !important; /* ç§»é™¤é™°å½± */
  font-family: var(--pixel-font) !important; /* åƒç´ é¢¨æ ¼å­—é«” */
  font-size: 14px !important; /* åŸºç¤å­—é«”å¤§å° */
  text-shadow: none; /* æ·ºè‰²èƒŒæ™¯ä¸éœ€è¦æ–‡å­—é™°å½± */
  opacity: 0.95 !important; /* è¼•å¾®é€æ˜åº¦ */
}

/* ============================================
  * ğŸ”§ è¼¸å…¥å€åŸŸæ§åˆ¶æŒ‰éˆ•ç¸®å°èª¿æ•´
  * ============================================ */

/* #options_button: è¼¸å…¥æ¡†å·¦å´çš„é¸é …èœå–®æŒ‰éˆ• */
#options_button {
  font-size: 1rem; /* é€²ä¸€æ­¥æ¸›å°åœ–æ¨™å­—é«”å¤§å° */
  padding: 3px; /* ç¸®å°å…§é‚Šè· */
}

/* è¼¸å…¥æ¡†å³å´æ§åˆ¶æŒ‰éˆ•çµ„ç¸®å°èª¿æ•´ï¼š
  * #rightSendForm > .stscript_btn: STscriptæŒ‡ä»¤æŒ‰éˆ•
  * #rightSendForm > .mes_stop: åœæ­¢ç”ŸæˆæŒ‰éˆ•
  * #rightSendForm > .interactable: äº’å‹•å…ƒç´  */
#rightSendForm > .stscript_btn,
#rightSendForm > .mes_stop,
#rightSendForm > .interactable {
  font-size: 0.95rem !important; /* é€²ä¸€æ­¥æ¸›å°åœ–æ¨™å­—é«”è‡³95% */
  padding: 4px !important; /* ç¸®å°å…§é‚Šè·è‡³4px */
  line-height: 1; /* ç¢ºä¿åœ–æ¨™å‚ç›´å±…ä¸­ */
}

/* #send_but: ç™¼é€æ¶ˆæ¯æŒ‰éˆ•çš„ç‰¹åˆ¥èª¿æ•´ */
#send_but {
  font-size: 0.95rem !important; /* èˆ‡å…¶ä»–æŒ‰éˆ•ä¿æŒä¸€è‡´çš„å­—é«”å¤§å° */
  padding: 4px 6px !important; /* å·¦å³4pxã€ä¸Šä¸‹6pxå…§é‚Šè· */
}

/* #extensionsMenuButton: æ“´å±•èœå–®æŒ‰éˆ•ç¸®å° */
#extensionsMenuButton {
  font-size: 0.95rem !important; /* èˆ‡å…¶ä»–æŒ‰éˆ•ä¿æŒä¸€è‡´çš„å­—é«”å¤§å° */
  padding: 4px !important; /* ç¸®å°å…§é‚Šè· */
}

/* #mes_stop: åœæ­¢ç”ŸæˆæŒ‰éˆ•çš„é¡å¤–ç¢ºä¿è¨­å®š */
#mes_stop {
  font-size: 0.95rem !important; /* èˆ‡å…¶ä»–æŒ‰éˆ•ä¿æŒä¸€è‡´çš„å­—é«”å¤§å° */
  padding: 4px !important; /* ç¸®å°å…§é‚Šè· */
}

/* ============================================
  * ğŸ“ é¢æ¿å…§æ¨™é¡Œæ¨£å¼çµ±ä¸€
  * ============================================ */

/* ä¸»è¦å€å¡Šæ¨™é¡Œæ¨£å¼ï¼ˆå¦‚æ“´å±•è¨­å®šã€é è¨­ç­‰ï¼‰ï¼š
  * #extensions_settings .inline-drawer-toggle.inline-drawer-header: æ“´å±•è¨­å®šä¸­çš„å…§è¯æŠ½å±‰æ¨™é¡Œ
  * #extensions_settings2 .inline-drawer-toggle.inline-drawer-header: æ“´å±•è¨­å®š2ä¸­çš„å…§è¯æŠ½å±‰æ¨™é¡Œ  
  * .standoutHeader: çªå‡ºé¡¯ç¤ºçš„æ¨™é¡Œé¡ */
#extensions_settings .inline-drawer-toggle.inline-drawer-header,
#extensions_settings2 .inline-drawer-toggle.inline-drawer-header,
.standoutHeader {
  color: var(--pixel-text-light) !important; /* æ™¨é›¾ç°æ–‡å­— */
  font-size: 16px !important; /* æ¨™é¡Œå­—é«”å¤§å° */
  text-shadow: 1px 1px 0px rgba(255, 255, 255, 0.7); /* 70%é€æ˜ç™½è‰²æ–‡å­—é™°å½± */
  border-bottom: 2px solid var(--pixel-border) !important; /* å¯¦ç·šä¸‹é‚Šæ¡†åˆ†éš” */
  padding: 8px 10px !important; /* ä¸Šä¸‹8pxã€å·¦å³10pxå…§é‚Šè· */
  margin: 0 0 10px 0 !important; /* ä¸‹å¤–é‚Šè·10px */
  background: rgba(19, 41, 77, 0.3) !important; /* 30%é€æ˜ç™½è‰²èƒŒæ™¯ä½œç‚ºå€åˆ† */
  width: 100%; /* å æ»¿å®¹å™¨å¯¬åº¦ */
  border-radius: 3px 3px 0 0; /* ä¸Šæ–¹åœ“è§’ï¼Œä¸‹æ–¹ç›´è§’ */
}

/* æ¬¡è¦è¨­å®šæ¨™é¡Œï¼ˆå¦‚ç”¨æˆ¶è¨­å®šå…§çš„æ¨™ç±¤ï¼‰ï¼š
  * #user-settings-block h4: ç”¨æˆ¶è¨­å®šå€å¡Šä¸­çš„h4æ¨™é¡Œ */
#user-settings-block h4 {
  color: var(--pixel-text-light) !important; /* æ™¨é›¾ç°æ–‡å­— */
  font-size: 14px !important; /* è¼ƒå°çš„æ¨™é¡Œå­—é«” */
  text-shadow: none; /* ä¸ä½¿ç”¨æ–‡å­—é™°å½± */
  border-bottom: 2px dotted var(--pixel-border) !important; /* é»ç‹€ä¸‹é‚Šæ¡†å€åˆ¥æ–¼ä¸»æ¨™é¡Œ */
  padding-bottom: 5px !important; /* ä¸‹å…§é‚Šè· */
  margin-bottom: 10px !important; /* ä¸‹å¤–é‚Šè· */
  background: var(--pixel-accent-alt) !important; /* è±†æ²™è‰²èƒŒæ™¯ */
}

/* ============================================
  * ğŸ” ç‰¹æ®Šè¼¸å…¥æ¬„ä½æ¨£å¼
  * ============================================ */

/* å„ç¨®ç‰¹æ®Šè¼¸å…¥æ¬„ä½çš„çµ±ä¸€æ¨£å¼ï¼š
  * #settingsSearch: è¨­å®šæœå°‹æ¡†
  * .neo-range-input: æ–°å¼ç¯„åœè¼¸å…¥æ¡†
  * .aux_field: è¼”åŠ©è¼¸å…¥æ¬„ä½
  * #tag_import_setting: æ¨™ç±¤åŒ¯å…¥è¨­å®šæ¡†
  * .widthNatural.flex1.margin0: è‡ªç„¶å¯¬åº¦çš„å½ˆæ€§è¼¸å…¥æ¡† */
#settingsSearch,
.neo-range-input,
.aux_field,
#tag_import_setting,
.widthNatural.flex1.margin0 {
  font-family: var(--pixel-font) !important; /* åƒç´ é¢¨æ ¼å­—é«” */
  background-color: var(--pixel-input-bg) !important; /* ç»Ÿä¸€è¾“å…¥æ¡†èƒŒæ™¯è‰² */
  color: var(--pixel-text) !important; /* æœˆå…‰ç™½æ–‡å­— */
  border: 2px solid var(--pixel-border) !important; /* é›¾ä¸­é’çŸ³é‚Šæ¡† */
  border-radius: 4px !important; /* è¼•å¾®åœ“è§’ */
  box-shadow: inset 2px 2px 0px var(--pixel-shadow) !important; /* å…§é™°å½±å‡¹é™·æ•ˆæœ */
  transition: all 0.1s ease-in-out; /* å¹³æ»‘éæ¸¡å‹•ç•« */
}

/* ç‰¹æ®Šè¼¸å…¥æ¬„ä½ç²å¾—ç„¦é»æ™‚çš„æ¨£å¼ */
#settingsSearch:focus,
.neo-range-input:focus,
.aux_field:focus,
#tag_import_setting:focus,
.widthNatural.flex1.margin0:focus {
  border-color: var(--pixel-accent-alt) !important; /* ç„¦é»æ™‚é‚Šæ¡†è®Šç‚ºè±†æ²™è‰² */
  /* ä½¿ç”¨color-mixå‡½æ•¸å‰µé€ æ›´æ·±çš„è±†æ²™è‰²é™°å½± */
  box-shadow: inset 2px 2px 0px color-mix(in srgb, var(--pixel-accent-alt) 80%, black) !important;
}

/* ============================================
  * ğŸ“ ç‰¹æ®Šæ–‡æœ¬å€åŸŸæ¨£å¼
  * ============================================ */

/* è§’è‰²æè¿°å’Œé¦–æ¬¡æ¶ˆæ¯æ–‡æœ¬æ¡†çš„çµ±ä¸€èƒŒæ™¯è‰²ï¼š
  * #description_textarea: è§’è‰²æè¿°æ–‡æœ¬å€åŸŸ
  * #firstmessage_textarea: é¦–æ¬¡æ¶ˆæ¯æ–‡æœ¬å€åŸŸ */
#description_textarea,
#firstmessage_textarea {
  background-color: var(--pixel-input-bg) !important; /* ç»Ÿä¸€è¾“å…¥æ¡†èƒŒæ™¯è‰² */
}

/* --- ç‰¹æ®Šå¼¹çª—å±‚çº§æ§åˆ¶ --- */
/* è®©é€æ˜å¯¹è¯å¼¹çª—è¦†ç›–æ•´ä¸ªé¡µé¢ï¼Œå¹¶ä¿®å¤è‡ªé€‚åº”é—®é¢˜ */
.popup.transparent_dialogue_popup.popup--animation-none {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  width: 100% !important; /* ä½¿ç”¨ç™¾åˆ†æ¯”ä»¥è·å¾—æ›´å¥½çš„è‡ªé€‚åº”æ€§ */
  height: 100% !important;
  max-width: none !important;
  max-height: none !important;
  z-index: 9997 !important; /* è¿›ä¸€æ­¥é™ä½ï¼Œç¡®ä¿åœ¨åŠ è½½å›¾æ ‡ä¹‹ä¸‹ */
  background: linear-gradient(135deg, var(--pixel-panel-bg), #2c2c3e) !important; /* åº”ç”¨å¤œé—´æ·±è‰²æ¸å˜èƒŒæ™¯ */
  backdrop-filter: blur(2px);
  -webkit-backdrop-filter: blur(2px);
  border: none !important;
  box-shadow: none !important;
  border-radius: 0 !important;
  margin: 0 !important;
  padding: 0 !important;
  transform: none !important;
  display: block !important;
  inset: 0 !important;
  overflow: hidden !important;
  pointer-events: none !important; /* é»˜è®¤ä¸æ‹¦æˆªç‚¹å‡» */
}

/* å¼ºåˆ¶å¤„ç†é¡µé¢è¾¹è·é—®é¢˜ */
.popup.transparent_dialogue_popup.popup--animation-none::before {
  content: '' !important;
  position: fixed !important;
  top: -10px !important;
  left: -10px !important;
  right: -10px !important;
  bottom: -10px !important;
  width: calc(100vw + 20px) !important;
  height: calc(100vh + 20px) !important;
  background: linear-gradient(135deg, var(--pixel-panel-bg), #2c2c3e) !important; /* åº”ç”¨å¤œé—´æ·±è‰²æ¸å˜èƒŒæ™¯ */
  z-index: -1 !important;
}

/* .load-spinner: AIç”Ÿæˆæ™‚çš„åŠ è¼‰æ—‹è½‰å™¨å…ƒç´ ï¼Œç¡®ä¿åœ¨æœ€é¡¶å±‚ */
.load-spinner {
  position: fixed !important; /* å›ºå®šå®šä½ */
  z-index: 100001 !important; /* ç¡®ä¿åŠ è½½åŠ¨ç”»åœ¨æœ€é¡¶å±‚ */
  top: 50% !important; /* å‚ç›´ç½®ä¸­ */
  left: 50% !important; /* æ°´å¹³ç½®ä¸­ */
  transform: translate(-50%, -50%) !important; /* ç²¾ç¢ºä¸­å¿ƒå°é½Š */
  margin: 0 !important; /* ç§»é™¤å¤–é‚Šè· */
  padding: 0 !important; /* ç§»é™¤å…§é‚Šè· */
  pointer-events: auto !important; /* å…è®¸è‡ªèº«è¢«äº¤äº’ */
}

/* ç§»åŠ¨ç«¯ç‰¹æ®Šå¤„ç†ï¼šç¡®ä¿AIç”Ÿæˆæ—¶ä¸é˜»æŒ¡äº¤äº’ */
@media screen and (max-width: 1000px) {
  /* Completion Prompt Manager ç§»åŠ¨ç«¯é€‚é… */
  #completion_prompt_manager_popup {
    width: 100% !important; /* ç§»åŠ¨ç«¯å…¨å±å®½åº¦ */
    height: calc(100dvh - var(--topBarBlockSize, 50px) - var(--bottomFormBlockSize, 80px)) !important;
    top: calc(var(--topBarBlockSize, 50px)) !important; /* ç´§è´´é¡¶æ */
    left: 0 !important;
    right: 0 !important;
    margin: 0 !important;
    border-radius: 0 !important; /* ç§»åŠ¨ç«¯ç§»é™¤åœ†è§’ */
    z-index: 10000 !important; /* ç¡®ä¿åœ¨æ­£ç¡®å±‚çº§ */
  }

  #completion_prompt_manager_popup.drawer-content {
    width: 100% !important;
    height: 100% !important;
    border-radius: 0 !important;
    box-shadow: none !important; /* ç§»åŠ¨ç«¯ç®€åŒ–é˜´å½± */
  }

  /* ç¡®ä¿é¢æ¿åœ¨ç§»åŠ¨ç«¯å§‹ç»ˆå¯ç‚¹å‡» */
  #left-nav-panel,
  #right-nav-panel,
  #WorldInfo,
  #AdvancedFormatting,
  #rm_api_block,
  #user-settings-block,
  #Backgrounds,
  #rm_extensions_block,
  #completion_prompt_manager_popup {
    /* æ·»åŠ  Prompt Manager åˆ°å¯ç‚¹å‡»åˆ—è¡¨ */
    pointer-events: auto !important;
    z-index: 9999 !important;
  }

  /* ç¡®ä¿é¡¶æ æŒ‰é’®åœ¨ç§»åŠ¨ç«¯å¯ç‚¹å‡» */
  /* ç¡®ä¿é¡¶æ æŒ‰é’®åœ¨ç§»åŠ¨ç«¯å¯ç‚¹å‡» */
  #top-bar,
  #top-bar .drawer-icon,
  #top-settings-holder {
    pointer-events: auto !important;
    z-index: 10001 !important; /* ç•¥é«˜äºé¢æ¿ */
  }
  #top-settings-holder {
    top: 0 !important;
  }

  /* ç¡®ä¿èŠå¤©åŒºåŸŸå’Œè¾“å…¥åŒºåŸŸåœ¨AIç”Ÿæˆæ—¶ä¿æŒå¯äº¤äº’ */
  #chat,
  #send_form,
  #send_textarea,
  #send_but,
  #mes_stop,
  .mes,
  .menu_button,
  .stscript_btn {
    pointer-events: auto !important;
    position: relative !important;
    z-index: 9998 !important;
  }

  /* .mes: æ¯ä¸€æ¢èŠå¤©æ¶ˆæ¯çš„å®¹å™¨ï¼ˆåŒ…å«é ­åƒã€åç¨±ã€å…§å®¹ï¼‰ */
.mes {
  margin-bottom: 5px !important; /* æ¶ˆæ¯é–“è·5åƒç´  */
  padding: 10px !important; /* å…§é‚Šè·10åƒç´  */
}

  /* é˜²æ­¢ä»»ä½•å…¨å±è¦†ç›–å…ƒç´ åœ¨AIç”Ÿæˆæ—¶é˜»æŒ¡äº¤äº’ */
  body.generating *[style*='position: fixed'],
  body.generating *[style*='position: absolute'] {
    pointer-events: none !important;
  }

  /* ä½†æ˜¯ä¿æŒå…³é”®äº¤äº’å…ƒç´ å¯ç‚¹å‡» */
  body.generating #chat,
  body.generating #send_form,
  body.generating #top-bar,
  body.generating .drawer-icon,
  body.generating .menu_button,
  body.generating .stscript_btn,
  body.generating #left-nav-panel,
  body.generating #right-nav-panel,
  body.generating #completion_prompt_manager_popup {
    /* ç¡®ä¿ Prompt Manager åœ¨ç”Ÿæˆæ—¶ä¹Ÿå¯ç‚¹å‡» */
    pointer-events: auto !important;
  }
}

/* ä¿®å¤ Android ç«¯ç”¨æˆ·ç»Ÿè®¡æŒ‰é’®ç‚¹å‡»é—®é¢˜ */
.user_stats_button {
  pointer-events: auto !important;
  position: relative;
  z-index: 10002 !important;
}
/* ============================================
  * ğŸ“‹ ä¸‹æ‹‰é¸æ“‡æ¡†èƒŒæ™¯çµ±ä¸€æ¨£å¼
  * ============================================ */

/* æ‰€æœ‰selecté€‰æ‹©æ¡†ç»Ÿä¸€èƒŒæ™¯è‰² */
select,
select.J-paginationjs-size-select,
#themes,
#example_messages_behavior,
#main_api,
#chat_completion_source,
#persona_sort_order,
#persona_description_position,
select[id*='preset'],
select[id*='template'],
select[id*='theme'] {
  background-color: var(--pixel-input-bg) !important; /* ç»Ÿä¸€è¾“å…¥æ¡†èƒŒæ™¯è‰² */
  color: var(--pixel-text) !important; /* æœˆå…‰ç™½æ–‡å­— */
  border: 2px solid var(--pixel-border) !important; /* é›¾ä¸­é’çŸ³è¾¹æ¡† */
}

/* ============================================
  * ğŸ’€ å±éšªæ“ä½œæŒ‰éˆ•è­¦ç¤ºæ¨£å¼
  * ============================================ */

/* éª·é«åœ–æ¨™æŒ‰éˆ• - å±éšªæ“ä½œçš„ç´…è‰²è­¦ç¤ºï¼š
  * .menu_button.red_button.fa-skull: å¸¶æœ‰éª·é«åœ–æ¨™çš„ç´…è‰²å±éšªæŒ‰éˆ•
  * .menu_button.red_button .fa-skull: ç´…è‰²æŒ‰éˆ•å…§çš„éª·é«åœ–æ¨™å…ƒç´  */
.menu_button.red_button.fa-skull,
.menu_button.red_button .fa-skull {
  color: #e53935 !important; /* æ¨™æº–ç´…è‰²ç³»è­¦ç¤ºè‰²ï¼ˆMaterial Red 600ï¼‰ */
}
/* ============================================
  * ğŸ’» ç¨‹å¼ç¢¼å€å¡ŠåŸºç¤æ¨£å¼
  * ============================================ */

/* ğŸ”¸ è¡Œå…§ä»£ç¢¼æ¨£å¼ï¼ˆ`code`ï¼‰ */
code {
  font-family: 'Courier New', Courier, monospace !important; /* ç­‰å¯¬å­—é«” */
  background-color: #3a4a4a !important; /* å¹½é™æ¹–æ°´èƒŒæ™¯ï¼Œå€åˆ¥æ–¼ä»£ç¢¼å¡Š */
  color: var(--pixel-text) !important; /* æœˆå…‰ç™½æ–‡å­— */
  border: 1px solid var(--pixel-border) !important; /* è¼ƒç´°çš„é‚Šæ¡† */
  border-radius: 3px; /* å°åœ“è§’ */
  padding: 2px 4px; /* ç·Šå¯†å…§é‚Šè· */
  font-size: 0.9em; /* ç¨å°çš„å­—é«” */
  word-break: keep-all; /* é¿å…æ–·è© */
  display: inline; /* ç¢ºä¿è¡Œå…§é¡¯ç¤º */
  vertical-align: baseline; /* åŸºç·šå°é½Š */
}

/* ğŸ”¸ ä»£ç¢¼å¡Šæ¨£å¼ï¼ˆ```code```ï¼‰ */
pre {
  font-family: 'Courier New', Courier, monospace !important; /* ç­‰å¯¬å­—é«” */
  background-color: #1a2a2a !important; /* å¤–å±¤æ·±æ—å¤œè‰²èƒŒæ™¯ */
  color: var(--pixel-text) !important; /* æœˆå…‰ç™½æ–‡å­— */
  border: 3px solid var(--pixel-border) !important; /* å¤–å±¤è¼ƒç²—çš„é›¾ä¸­é’çŸ³é‚Šæ¡† */
  border-radius: 8px; /* å¤–å±¤è¼ƒå¤§åœ“è§’ */
  padding: 8px; /* å¤–å±¤å…§é‚Šè· */
  font-size: 13px; /* é©ä¸­çš„å­—é«”å¤§å° */
  line-height: 1.4; /* é©ç•¶çš„è¡Œé«˜ï¼Œé¿å…æ–‡å­—é‡ç–Š */
  white-space: pre-wrap; /* ä¿æŒç©ºç™½ä¸¦è‡ªå‹•æ›è¡Œ */
  word-wrap: break-word; /* é•·å–®è©æ›è¡Œ */
  overflow-x: auto; /* æ°´å¹³æ»¾å‹•è™•ç†é•·è¡Œ */
  max-width: 100%; /* é™åˆ¶æœ€å¤§å¯¬åº¦ */
  margin: 12px 0; /* ä¸Šä¸‹å¤–é‚Šè· */
  display: block; /* ç¢ºä¿å¡Šç´šé¡¯ç¤º */
  position: relative; /* ç‚ºå…§å±¤å®¹å™¨å®šä½æä¾›åŸºæº– */
}

/* ğŸ”¸ ä»£ç¢¼å¡Šå…§å®¹å€åŸŸï¼ˆå…§å±¤æ¡†ï¼‰ */
pre::before {
  content: '';
  position: absolute;
  top: 4px;
  left: 4px;
  right: 4px;
  bottom: 4px;
  background-color: #252535 !important; /* å…§å±¤ä»£ç¢¼èƒŒæ™¯è‰² */
  border: 2px solid color-mix(in srgb, var(--pixel-border) 60%, transparent) !important; /* å…§å±¤åŠé€æ˜é‚Šæ¡† */
  border-radius: 4px; /* å…§å±¤è¼ƒå°åœ“è§’ */
  z-index: 1; /* ç½®æ–¼èƒŒæ™¯å±¤ */
}

/* ğŸ”¸ ç¢ºä¿ä»£ç¢¼å…§å®¹åœ¨å…§å±¤æ¡†ä¹‹ä¸Š */
pre code {
  position: relative;
  z-index: 2; /* ç½®æ–¼å…§å±¤æ¡†ä¹‹ä¸Š */
  background: transparent !important; /* é€æ˜èƒŒæ™¯ï¼Œé¿å…é›™é‡èƒŒæ™¯ */
  border: none !important; /* ç§»é™¤é‚Šæ¡† */
  padding: 8px 12px !important; /* å…§å®¹å€åŸŸå…§é‚Šè· */
  font-size: inherit !important; /* ç¹¼æ‰¿çˆ¶å…ƒç´ å­—é«”å¤§å° */
  color: inherit !important; /* ç¹¼æ‰¿çˆ¶å…ƒç´ é¡è‰² */
  border-radius: 0 !important; /* ç§»é™¤åœ“è§’ */
  white-space: inherit !important; /* ç¹¼æ‰¿çˆ¶å…ƒç´ ç©ºç™½è™•ç† */
  display: block; /* ç¢ºä¿å€å¡Šé¡¯ç¤º */
}

/* ğŸ”¸ ç„¡å…§å®¹æ™‚çš„ä»£ç¢¼å¡Šè™•ç† */
pre:not(:has(code)) {
  padding: 16px 20px !important; /* ç„¡codeæ¨™ç±¤æ™‚çš„å…§é‚Šè· */
}

pre:not(:has(code))::before {
  top: 4px;
  left: 4px;
  right: 4px;
  bottom: 4px;
}

/* ğŸ”¸ éŸ¿æ‡‰å¼ä»£ç¢¼å¡Šé©é… */
@media screen and (max-width: 768px) {
  pre {
    font-size: 12px; /* ç§»å‹•ç«¯ç¨å°å­—é«” */
    padding: 10px 12px; /* æ¸›å°‘å…§é‚Šè· */
    margin: 8px 0; /* æ¸›å°‘å¤–é‚Šè· */
    border-radius: 4px; /* è¼ƒå°åœ“è§’ */
  }

  code {
    font-size: 0.85em; /* ç§»å‹•ç«¯æ›´å°çš„è¡Œå…§ä»£ç¢¼ */
    padding: 1px 3px; /* æ›´ç·Šå¯†çš„å…§é‚Šè· */
  }
}

/* ============================================
  * ğŸ“ Markdown å¼•ç”¨å€å¡Šæ¨£å¼
  * ============================================ */

/* ğŸ”¸ å¼•ç”¨å€å¡ŠåŸºç¤æ¨£å¼ï¼ˆ> å…§å®¹ï¼‰ */
blockquote {
  background-color: #2c2c3e !important; /* å¤œé—´æ¨¡å¼æ·±è‰²èƒŒæ™¯ */
  color: var(--pixel-text) !important; /* æœˆå…‰ç™½æ–‡å­— */
  border-left: 4px solid var(--pixel-accent) !important; /* å·¦å´ç¥ç€å…‰é‡é»ç·š */
  border-radius: 0 6px 6px 0 !important; /* å³å´åœ“è§’ï¼Œå·¦å´ç›´è§’é…åˆé‡é»ç·š */
  margin: 12px 0 !important; /* ä¸Šä¸‹å¤–é‚Šè· */
  padding: 12px 16px 12px 20px !important; /* å·¦å´æ›´å¤šå…§é‚Šè·é…åˆé‡é»ç·š */
  font-style: italic; /* æ–œé«”å¼·èª¿å¼•ç”¨æ€§è³ª */
  box-shadow: 2px 2px 0px var(--pixel-shadow) !important; /* åƒç´ é¢¨æ ¼é™°å½± */
  position: relative; /* ç‚ºå½å…ƒç´ å®šä½æä¾›åŸºæº– */
}

/* ğŸ”¸ å¼•ç”¨å€å¡Šçš„å¼•è™Ÿè£é£¾ */
blockquote::before {
  content: '\201C'; /* å·¦å¼•è™Ÿ Unicode */
  font-size: 24px; /* è¼ƒå¤§çš„å¼•è™Ÿ */
  color: var(--pixel-accent); /* ç¥ç€å…‰å¼•è™Ÿ */
  position: absolute; /* çµ•å°å®šä½ */
  top: 8px; /* è·é›¢é ‚éƒ¨ */
  left: 8px; /* è·é›¢å·¦å´ */
  font-weight: bold; /* ç²—é«”å¼•è™Ÿ */
  opacity: 0.6; /* è¼•å¾®é€æ˜åº¦ */
}

blockquote::after {
  content: '\201D'; /* å³å¼•è™Ÿ Unicode */
  font-size: 24px; /* è¼ƒå¤§çš„å¼•è™Ÿ */
  color: var(--pixel-accent); /* ç¥ç€å…‰å¼•è™Ÿ */
  position: absolute; /* çµ•å°å®šä½ */
  bottom: 8px; /* è·é›¢åº•éƒ¨ */
  right: 8px; /* è·é›¢å³å´ */
  font-weight: bold; /* ç²—é«”å¼•è™Ÿ */
  opacity: 0.6; /* è¼•å¾®é€æ˜åº¦ */
}

/* ğŸ”¸ åµŒå¥—å¼•ç”¨æ¨£å¼ */
blockquote blockquote {
  background-color: #1a2a2a !important; /* åµŒå¥—å¼•ç”¨ç”¨æ›´æ·±çš„èƒŒæ™¯ */
  border-left-color: var(--pixel-user-accent) !important; /* åµŒå¥—å¼•ç”¨ç”¨æ©„æ¦„ç»¿é‡é»ç·š */
  margin: 8px 0 !important; /* æ¸›å°‘åµŒå¥—å¼•ç”¨çš„å¤–é‚Šè· */
  font-size: 0.95em; /* ç¨å°çš„å­—é«”å€åˆ¥å±¤æ¬¡ */
}

/* ğŸ”¸ å¼•ç”¨å€å¡Šå…§çš„æ®µè½æ¨£å¼ */
blockquote p {
  margin: 0 0 8px 0 !important; /* æ®µè½é–“è· */
  line-height: 1.5; /* é©ç•¶è¡Œé«˜æé«˜å¯è®€æ€§ */
}

blockquote p:last-child {
  margin-bottom: 0 !important; /* æœ€å¾Œæ®µè½ç§»é™¤ä¸‹é‚Šè· */
}

/* ğŸ”¸ å¼•ç”¨å€å¡Šå…§çš„ä»£ç¢¼æ¨£å¼èª¿æ•´ */
blockquote code {
  background-color: rgba(58, 74, 74, 0.7) !important; /* åŠé€æ˜æ·±è‰²èƒŒæ™¯ */
  border-color: var(--pixel-accent) !important; /* ç¥ç€å…‰é‚Šæ¡†é…åˆä¸»é¡Œ */
}

blockquote pre {
  background-color: rgba(26, 42, 42, 0.8) !important; /* åŠé€æ˜æ·±è‰²èƒŒæ™¯ */
  border-color: var(--pixel-accent) !important; /* ç¥ç€å…‰é‚Šæ¡† */
}

/* ğŸ”¸ éŸ¿æ‡‰å¼å¼•ç”¨å€å¡Šé©é… */
@media screen and (max-width: 768px) {
  blockquote {
    padding: 10px 14px 10px 18px !important; /* ç§»å‹•ç«¯æ¸›å°‘å…§é‚Šè· */
    margin: 10px 0 !important; /* æ¸›å°‘å¤–é‚Šè· */
    font-size: 0.95em; /* ç¨å°å­—é«” */
  }

  blockquote::before,
  blockquote::after {
    font-size: 20px; /* ç§»å‹•ç«¯è¼ƒå°å¼•è™Ÿ */
  }

  blockquote blockquote {
    padding: 8px 12px 8px 16px !important; /* åµŒå¥—å¼•ç”¨æ›´ç·Šå¯† */
    margin: 6px 0 !important; /* æ›´å°å¤–é‚Šè· */
  }
}

/* ============================================
  * ğŸŒˆ Highlight.js èªæ³•é«˜äº®ç³»çµ±
  * ============================================ */

/* .hljs: Highlight.js ä¸»å®¹å™¨æ¨£å¼ */
.hljs {
  display: block; /* å€å¡Šç´šå…ƒç´  */
  overflow-x: auto; /* æ°´å¹³æ»¾å‹•è™•ç†é•·ä»£ç¢¼è¡Œ */
  padding: 0.5em; /* å…§é‚Šè· */
  color: var(--pixel-text); /* é è¨­æ–‡å­—é¡è‰² */
  background: #252535; /* æ·±è‰²èƒŒæ™¯èˆ‡ä»£ç¢¼å¡Šä¸€è‡´ */
}

/* è¨»é‡‹å’Œå¼•ç”¨ - æŸ”å’Œç°è‰² */
.hljs-comment,
.hljs-quote {
  color: #93a1a1; /* æŸ”å’Œçš„ç°è‰² */
  font-style: italic; /* æ–œé«”å¼·èª¿ */
}

/* é—œéµå­—å’Œèªè¨€çµæ§‹ - å“çº¢è‰² */
.hljs-keyword,
.hljs-selector-tag,
.hljs-subst {
  color: #d33682; /* å“çº¢è‰² */
}

/* æ•¸å€¼å’Œè®Šé‡ - é’è‰² */
.hljs-number,
.hljs-literal,
.hljs-variable,
.hljs-template-variable,
.hljs-tag .hljs-attr {
  color: #2aa198; /* é’è‰² */
}

/* å­—ç¬¦ä¸²å’Œæ–‡æª”æ¨™ç±¤ - æ©„æ¦„ç»¿ */
.hljs-string,
.hljs-doctag {
  color: #859900; /* æ©„æ¦„ç»¿ */
}

/* æ¨™é¡Œå’Œé¸æ“‡å™¨ - è“è‰² */
.hljs-title,
.hljs-section,
.hljs-selector-id {
  color: #268bd2; /* è“è‰² */
}

/* æ›¿æ›æ–‡æœ¬ - æ­£å¸¸å­—é‡ */
.hljs-subst {
  font-weight: normal; /* é‡ç½®ç‚ºæ­£å¸¸å­—é‡ */
}

/* é¡å‹å’Œé¡æ¨™é¡Œ - é»„è‰² */
.hljs-type,
.hljs-class .hljs-title {
  color: #b58900; /* é»„è‰² */
}

/* æ¨™ç±¤å’Œå±¬æ€§ - æ©™è‰² */
.hljs-tag,
.hljs-name,
.hljs-attribute {
  color: #cb4b16; /* æ©™è‰² */
}

/* æ­£å‰‡è¡¨é”å¼å’Œéˆæ¥ - çº¢è‰² */
.hljs-regexp,
.hljs-link {
  color: #dc322f; /* çº¢è‰² */
}

/* ç¬¦è™Ÿå’Œåˆ—è¡¨é … - ç´«è‰² */
.hljs-symbol,
.hljs-bullet {
  color: #6c71c4; /* ç´«è‰² */
}

/* å…§å»ºå‡½æ•¸ - é’è‰² */
.hljs-built_in,
.hljs-builtin-name {
  color: #2aa198; /* é’è‰² */
}

/* å…ƒæ•¸æ“š - ç°è‰² */
.hljs-meta {
  color: #93a1a1;
}

/* å·®ç•°é¡¯ç¤º - åˆªé™¤å…§å®¹ */
.hljs-deletion {
  background: #5c0000;
}

/* å·®ç•°é¡¯ç¤º - æ–°å¢å…§å®¹ */
.hljs-addition {
  background: #005c00;
}

/* å¼·èª¿æ–‡æœ¬ - æ–œé«” */
.hljs-emphasis {
  font-style: italic; /* æ–œé«”å¼·èª¿ */
}

/* å¼·çƒˆå¼·èª¿ - ç²—é«” */
.hljs-strong {
  font-weight: bold; /* ç²—é«”å¼·èª¿ */
}
/* ============================================
  * ğŸ§© Select2 é«˜ç´šé¸æ“‡æ¡†çµ„ä»¶æ¨£å¼å„ªåŒ–
  * ============================================ */

/* Select2 ä¸»è¦å®¹å™¨åŸºç¤æ¨£å¼ï¼š
  * .select2-selection: å–®é¸æ¨¡å¼çš„é¸æ“‡æ¡†
  * .select2-selection--multiple: å¤šé¸æ¨¡å¼çš„é¸æ“‡æ¡† */
.select2-selection,
.select2-selection--multiple {
  background-color: var(--pixel-input-bg) !important; /* ç»Ÿä¸€è¾“å…¥æ¡†èƒŒæ™¯è‰² */
  border: 2px solid var(--pixel-border) !important; /* é›¾ä¸­é’çŸ³é‚Šæ¡† */
  border-radius: 4px !important; /* è¼•å¾®åœ“è§’ */
  box-shadow: inset 2px 2px 0px var(--pixel-shadow) !important; /* å…§é™°å½±å‡¹é™·æ•ˆæœ */
  color: var(--pixel-text) !important; /* æœˆå…‰ç™½æ–‡å­— */
}

/* Select2 ç²å¾—ç„¦é»æ™‚çš„ç‹€æ…‹æ¨£å¼ */
.select2-container--default.select2-container--focus .select2-selection--multiple,
.select2-container--default.select2-container--focus .select2-selection--single {
  border-color: var(--pixel-accent) !important; /* ç„¦é»æ™‚é‚Šæ¡†è®Šç‚ºç¥ç€å…‰ */
  box-shadow: inset 2px 2px 0px var(--pixel-accent-shadow) !important; /* æš—ç¥ç€å…§é™°å½± */
}

/* å¤šé¸æ¨¡å¼ä¸‹çš„æ¸²æŸ“å€åŸŸ */
.select2-selection__rendered {
  color: var(--pixel-text) !important; /* ä¿æŒæœˆå…‰ç™½æ–‡å­— */
}

/* å¤šé¸æ¨¡å¼ä¸‹å·²é¸ä¸­é …ç›®çš„æ¨£å¼ï¼š
  * .select2-selection__choice: é¸ä¸­é …ç›®çš„å®¹å™¨
  * .select2-selection__choice__display.interactable: å¯äº¤äº’çš„é¸ä¸­é …ç›®é¡¯ç¤º */
.select2-selection__choice,
.select2-selection__choice__display.interactable {
  background-color: var(--pixel-user-shadow) !important; /* ä½¿ç”¨ç”¨æˆ¶é™°å½±è‰² */
  border: 1px solid var(--pixel-user-accent) !important;
  color: var(--pixel-text) !important; /* æœˆå…‰ç™½æ–‡å­— */
  border-radius: 3px !important; /* å°åœ“è§’ */
  padding: 2px 5px !important; /* ç·Šå¯†å…§é‚Šè· */
  box-shadow: 1px 1px 0px var(--pixel-shadow);
}

/* å¤šé¸é …ç›®ä¸­çš„åˆªé™¤æŒ‰éˆ•æ¨£å¼ */
.select2-selection__choice__remove {
  color: var(--pixel-text) !important; /* æœˆå…‰ç™½æ–‡å­— */
  font-weight: bold !important; /* ç²—é«”å¼·èª¿ */
  margin-right: 5px !important; /* å³å´é–“è· */
}

.select2-selection__choice__remove:hover {
  color: #ff8a80 !important; /* æ·ºç´…è‰² */
}

/* Select2 ä¸‹æ‹‰é¸å–®å®¹å™¨ */
.select2-dropdown {
  background-color: var(--pixel-panel-bg) !important;
  border: 2px solid var(--pixel-border) !important;
  border-radius: 4px !important;
  box-shadow: 3px 3px 0px var(--pixel-shadow) !important;
}

/* ä¸‹æ‹‰é¸å–®ä¸­çš„ä¸€èˆ¬é¸é … */
.select2-results__option {
  color: var(--pixel-text);
}

/* æ‡¸åœæˆ–éµç›¤å°èˆªé«˜äº®çš„é¸é … */
.select2-results__option--highlighted[aria-selected] {
  background-color: var(--pixel-accent-hover) !important;
  color: #101a1a !important; /* å¤œé–“æ¨¡å¼æ‡¸åœæ–‡å­—é¡è‰² */
}

/* å·²è¢«é¸ä¸­çš„é¸é … */
.select2-results__option[aria-selected='true'] {
  background-color: var(--pixel-user-accent) !important;
  color: var(--pixel-text) !important;
}
/* ============================================
  * ğŸ“± å¹³æ¿æ©«å±æ¨¡å¼é©é… (iPadå°ˆç”¨)
  * ============================================ */

/* ä½¿ç”¨WebKitç‰¹æ€§æª¢æ¸¬ç¢ºä¿åªåœ¨æ”¯æ´è§¸æ§çš„è¨­å‚™ä¸Šæ‡‰ç”¨ */
@supports (-webkit-touch-callout: none) {
  /* ç•¶è¢å¹•å¯¬åº¦å¤§æ–¼ç­‰æ–¼1000pxæ™‚ï¼ˆå¹³æ¿æ©«å±æ¨¡å¼ï¼‰ */
  @media screen and (min-width: 1000px) {
    /* å½ˆçª—ä½ç½®èª¿æ•´ - ç¢ºä¿åœ¨é ‚æ¬„ä¸‹æ–¹æ­£ç¢ºé¡¯ç¤ºï¼š
      * #character_popup: è§’è‰²è©³æƒ…å½ˆçª—
      * #world_popup: ä¸–ç•Œè¨­å®šå½ˆçª—
      * .drawer-content: æŠ½å±œå…§å®¹å€åŸŸ */
    #character_popup,
    #world_popup,
    .drawer-content {
      margin-top: 0px; /* ç§»é™¤é ‚éƒ¨å¤–é‚Šè· */
      top: var(--topBarBlockSize, 50px) !important; /* è·é›¢é ‚æ¬„5pxï¼ˆé è¨­å€¼ï¼‰ */
    }

    /* é ‚éƒ¨è¨­å®šå€åŸŸçš„æŠ½å±œå…§å®¹èª¿æ•´ */
    #top-settings-holder .drawer .drawer-content {
      right: 0; /* å°é½Šå³å´ */
      left: 0; /* å°é½Šå·¦å´ */
      width: var(--sheldWidth); /* ä½¿ç”¨æ¡†æ¶å¯¬åº¦è®Šé‡ */
    }

    /* å·¦å³å°èˆªé¢æ¿çš„å¹³æ¿é©é… */
    #left-nav-panel,
    #right-nav-panel {
      margin: 0 auto; /* æ°´å¹³ç½®ä¸­ */
      /* é ‚éƒ¨ä½ç½®ï¼šé ‚æ¬„é«˜åº¦ + 5pxé–“è· */
      top: calc(var(--topBarBlockSize, 50px));
      /* æœ€å¤§é«˜åº¦ï¼š100%å‹•æ…‹è¦–çª—é«˜åº¦ - é ‚æ¬„é«˜åº¦ - åº•éƒ¨è¡¨å–®é«˜åº¦ */
      border-radius: 0 0 4px 4px; /* åƒ…åº•éƒ¨åœ“è§’ */
      border-bottom: 2px solid var(--pixel-border); /* åº•éƒ¨æ·ºç²‰è‰²é‚Šæ¡† */
    }
  }
}

/* ============================================
* ğŸ§© æ¨™ç±¤è¼¸å…¥è‡ªå‹•å®Œæˆæ¨£å¼ä¿®å¾©
* ============================================ */

/* ç¢ºä¿è‡ªå‹•å®Œæˆèœå–®é¡¯ç¤ºåœ¨æ‰€æœ‰å…¶ä»–å…ƒç´ ä¹‹ä¸Š */
.ui-autocomplete {
  z-index: 10003 !important; /* é«˜æ–¼å½ˆçª—å’Œé¢æ¿çš„z-index */
  background-color: var(--pixel-panel-bg) !important;
  border: none !important; /* ç§»é™¤è¾¹æ¡† */
  box-shadow: none !important; /* ç§»é™¤é˜´å½± */
  border-radius: 0 !important; /* ç§»é™¤åœ†è§’ */
  color: var(--pixel-text) !important;
  padding: 5px;
  font-family: var(--pixel-font) !important;
}

.ui-autocomplete .ui-menu-item {
  padding: 5px 10px !important;
  cursor: pointer;
  color: var(--pixel-text) !important;
  background: none !important;
  border: none !important;
  border-radius: 2px;
}

.ui-autocomplete .ui-menu-item:hover,
.ui-autocomplete .ui-menu-item.ui-state-focus {
  background-color: var(--pixel-user-accent) !important;
  border-color: var(--pixel-user-shadow) !important;
  color: var(--pixel-text) !important;
}

/* ============================================
* ğŸ”¥ æ”¶è—è§’è‰²å€åŸŸæ»¾å‹•æ¢ä¿®å¾©
* ============================================ */

/* æ”¶è—è§’è‰²å€åŸŸå®¹å™¨ */
#HotSwapWrapper > div {
  overflow-x: auto !important; /* å¼·åˆ¶å•Ÿç”¨æ°´å¹³æ»¾å‹•æ¢ */
  overflow-y: hidden; /* éš±è—å‚ç›´æ»¾å‹•æ¢ */
  flex-wrap: nowrap; /* é˜²æ­¢é ­åƒæ›è¡Œ */
  padding-bottom: 10px; /* ç‚ºæ»¾å‹•æ¢ç•™å‡ºç©ºé–“ */
  padding-right: 20px !important; /* ç¢ºä¿æœ€å¾Œä¸€å€‹é ­åƒå®Œæ•´é¡¯ç¤º */
}

/* æ”¶è—åŒºåŸŸæ»šåŠ¨æ¡æ ·å¼ */
#HotSwapWrapper > div::-webkit-scrollbar {
  height: 8px; /* æ»šåŠ¨æ¡é«˜åº¦ */
}

#HotSwapWrapper > div::-webkit-scrollbar-track {
  background: transparent; /* è½¨é“é€æ˜ */
}

#HotSwapWrapper > div::-webkit-scrollbar-thumb {
  background-color: color-mix(in srgb, var(--pixel-user-accent) 70%, transparent); /* ä½¿ç”¨å¤©ç©ºè“è‰²è°ƒ */
  border-radius: 4px;
}

#HotSwapWrapper > div::-webkit-scrollbar-thumb:hover {
  background-color: var(--pixel-user-shadow); /* æ‚¬åœæ—¶å˜ä¸ºæ›´æ·±çš„å¤©è“è‰² */
}

/* æ”¶è—é ­åƒé …ç›®æ¨£å¼å„ªåŒ– */
#HotSwapWrapper .character_select {
  flex-shrink: 0 !important; /* é˜²æ­¢é ­åƒè¢«å£“ç¸® */
  min-width: fit-content !important; /* ç¢ºä¿æœ‰è¶³å¤ çš„å¯¬åº¦ */
  margin-right: 10px !important; /* å¢åŠ é …ç›®é–“è· */
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
  text-align: center !important;
}

/* æ”¶è—é ­åƒåœ–ç‰‡æ¨£å¼ */
#HotSwapWrapper .character_select .avatar {
  flex-shrink: 0 !important; /* é˜²æ­¢é ­åƒè¢«å£“ç¸® */
  margin-bottom: 5px !important; /* èˆ‡åç¨±çš„é–“è· */
}

/* æ”¶è—é ­åƒåç¨±æ¨£å¼ */
#HotSwapWrapper .character_select .ch_name {
  white-space: nowrap !important; /* é˜²æ­¢åç¨±æ›è¡Œ */
  overflow: visible !important; /* ç¢ºä¿åç¨±å®Œæ•´é¡¯ç¤º */
  text-overflow: ellipsis !important; /* è¶…é•·åç¨±é¡¯ç¤ºçœç•¥è™Ÿ */
  max-width: 100px !important; /* é™åˆ¶æœ€å¤§å¯¬åº¦ */
}

/* ç§»å‹•ç«¯æ”¶è—é ­åƒå„ªåŒ– */
@media screen and (max-width: 1000px) {
  #HotSwapWrapper > div {
    padding-right: 15px !important; /* ç§»å‹•ç«¯é©åº¦çš„å³å´å…§é‚Šè· */
    padding-left: 5px !important; /* å·¦å´ä¹Ÿæ·»åŠ å°‘é‡å…§é‚Šè· */
  }

  #HotSwapWrapper .character_select {
    margin-right: 8px !important; /* ç§»å‹•ç«¯é©åº¦çš„é …ç›®é–“è· */
    min-width: 60px !important; /* ç§»å‹•ç«¯æœ€å°å¯¬åº¦ */
  }

  #HotSwapWrapper .character_select .ch_name {
    max-width: 80px !important; /* ç§»å‹•ç«¯é™åˆ¶åç¨±å¯¬åº¦ */
    font-size: 12px !important; /* é©ç•¶ç¸®å°å­—é«” */
  }
}

/* ============================================
* ğŸ¨ Prompt Manager æ¨™é¡Œæ–‡å­—é¡è‰²ä¿®å¾©
* ============================================ */
#completion_prompt_manager .completion_prompt_manager_header {
  color: var(--pixel-text) !important; /* ä½¿ç”¨ä¸»è¦æ·±è‰²æ–‡å­— */
  text-shadow: 1px 1px 0px rgba(255, 255, 255, 0.5); /* å¢åŠ å¯è®€æ€§ */
}

/* ============================================
* ğŸ¨ ä¸–ç•Œæ›¸(World Info)æ¢ç›®æ¨£å¼ä¿®æ­£
* ============================================ */
.WIEntryTitleAndStatus > .flex-container {
  min-width: 35px; /* å¢åŠ æœ€å°å¯¬åº¦ä»¥é˜²æ­¢å…¶å­å…ƒç´ è¢«å£“ç¸® */
}

.WIEntryTitleAndStatus .text_pole {
  min-width: 50px; /* ç‚ºä¸»è¦æ–‡å­—è¼¸å…¥æ¡†è¨­ç½®ä¸€å€‹åˆç†çš„æœ€å°å¯¬åº¦ */
}

/* ============================================
* ğŸ“± ç§»å‹•ç«¯å°å‡ºèœå–®ç‰¹åˆ¥ä¿®å¾©
* ============================================ */

/* ç§»å‹•ç«¯å°ˆç”¨æ¨£å¼ */

/* ç§»å‹•ç«¯å°å‡ºèœå–®é …ç›®å„ªåŒ– */
#export_format_popup .export_format {
  padding: 12px 16px !important; /* å¢åŠ è§¸æ‘¸å‹å¥½çš„å…§é‚Šè· */
  font-size: 16px !important; /* å¢å¤§å­—é«”ä»¥ä¾¿è§¸æ‘¸ */
  min-height: 44px !important; /* ç¢ºä¿è§¸æ‘¸ç›®æ¨™è¶³å¤ å¤§ */
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  touch-action: manipulation !important; /* é˜²æ­¢é›™æ“Šç¸®æ”¾ */
}

/* ç§»å‹•ç«¯è§¸æ‘¸åé¥‹å„ªåŒ– */
#export_format_popup .export_format:active {
  background-color: var(--pixel-user-accent) !important; /* è§¸æ‘¸æ™‚å¤©ç©ºè—èƒŒæ™¯ */
  border-color: var(--pixel-user-shadow) !important;
}

/* ç¢ºä¿åœ¨AIç”Ÿæˆæ™‚å°å‡ºåŠŸèƒ½ä»ç„¶å¯ç”¨ */
body.generating #export_button,
body.generating #export_format_popup,
body.generating #export_format_popup .export_format {
  pointer-events: auto !important;
  z-index: 10007 !important; /* åœ¨ç”Ÿæˆæ™‚æé«˜å±¤ç´š */
}

/* é˜²æ­¢ç§»å‹•ç«¯çš„è¦†è“‹å•é¡Œ */
#export_format_popup.list-group {
  position: fixed !important;
  z-index: 10008 !important;
  pointer-events: auto !important;

  /* ç¢ºä¿èœå–®åœ¨è¦–å£å…§é¡¯ç¤º */
  max-height: 80vh !important;
  overflow-y: auto !important;

  /* æ·»åŠ èƒŒæ™¯é®ç½©æ•ˆæœ */
  backdrop-filter: blur(2px) !important;
  -webkit-backdrop-filter: blur(2px) !important;
}
